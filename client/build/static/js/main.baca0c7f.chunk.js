(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{37:function(e,t,a){e.exports=a(59)},48:function(e,t,a){},51:function(e,t,a){},59:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),i=a(21),l=a.n(i),o=a(31),s=a(4),c=a(32),d=a(28),m=a(34),h=a.n(m),u=a(35),p=a.n(u),E=a(2);a(45),a(46);function C(e){return{type:"GET_DATA_FAILURE",error:e}}function g(e){return{type:"HANDLE_USERNAME_INPUT_CHANGE",data:e}}function f(e){return{type:"HANDLE_PASSWORD_INPUT_CHANGE",data:e}}function b(e){return{type:"UPDATE_CURRENT_USER",data:e}}function D(e){return{type:"CHANGE_ACTIVE_CARD_MODAL",id:e}}function N(e){return{type:"UPDATE_ACTIVE_BOARD_LISTS",lists:e}}function T(e,t){return function(a,n){e.preventDefault();var r=n(),i=r.username,l=r.password;console.log(JSON.stringify({username:i,password:l})),fetch(t,{method:"POST",body:JSON.stringify({username:i,password:l}),headers:{"Content-type":"application/json"}}).then((function(e){if(200===e.status)return console.log("Yay!"),e.json();throw console.log("no"),new Error(e.error)})).then((function(e){console.log("submit "+JSON.stringify(e)),a({type:"GET_DATA_SUCCESS",data:e})})).catch((function(e){console.log(e),a(C(e)),alert("Error logging in")}))}}function v(e,t,a){return function(n,r){var i;"/changeListName"===a&&(i=e.target.parentElement.parentElement.id),"/changeBoardName"===a&&(document.getElementById("board-name").innerHTML="",e.target.value="");var l=r().currentUser;console.log("route "+a),fetch(a,{method:"PUT",body:JSON.stringify({componentName:t,currentUser:l,listId:i}),headers:{"Content-type":"application/json"}}).then((function(e){return e.json()})).then((function(e){console.log("change name "+JSON.stringify(e)),"/changeListName"===a?(n(N(e.lists)),n(b(e.user))):n(b(e.user))})).catch((function(e){console.log(e),alert("hmmmm")}))}}function w(e){return function(t,a){t({type:"TOGGLE_IS_LOADING"});var n=a(),r=n.memberToAdd,i=n.currentUser,l=e.target.parentElement.parentElement.parentElement.parentElement.parentElement.parentElement.parentElement.id,o=e.target.parentElement.parentElement.parentElement.parentElement.parentElement.parentElement.parentElement.firstChild.id;fetch("/addMemberToCard",{method:"PUT",body:JSON.stringify({memberUsername:r,currentUser:i,listId:o,cardId:l}),headers:{"Content-type":"application/json"}}).then((function(e){return console.log("res "+JSON.stringify(e)),500===e.status?e:e.json()})).then((function(e){500===e.status?t({type:"DISPLAY_DUPLICATE_MEMBER_WARNING"}):(t(N(e.lists)),t(b(e.user)),t((function(e,t){var a=t();console.log("state"+JSON.stringify(a));var n=a.memberToAdd,r=a.currentUser.activeBoard;fetch("/addBoardToMember",{method:"POST",body:JSON.stringify({username:n,boardId:r}),headers:{"Content-type":"application/json"}}).catch((function(e){console.log(e),alert("hmmmm")}))})))})).catch((function(e){console.log(e),alert("hmmmm")}))}}function O(e){return function(t,a){var n=a(),r=Array.from(n.activeBoardLists);console.log(r);var i,l,o,s,c,d=n.currentUser,m=e.destination,h=e.source,u=e.draggableId;Promise.resolve(o=r.filter((function(e){return JSON.stringify(h.droppableId)===JSON.stringify(e._id)}))[0],r.forEach((function(e,t){JSON.stringify(e._id)===JSON.stringify(h.droppableId)&&(i=t)})),s=r.filter((function(e){return JSON.stringify(m.droppableId)===JSON.stringify(e._id)}))[0],r.forEach((function(e,t){JSON.stringify(e._id)===JSON.stringify(m.droppableId)&&(l=t)})),c=o.cards.filter((function(e){return JSON.stringify(e._id)===JSON.stringify(u)}))[0]).then((function(){console.log(u),console.log("source "+JSON.stringify(h)),console.log("destination "+JSON.stringify(m)),m&&(m.draoppableId===h.droppableId&&m.index===h.index||t(function(e,t,a,n,r,i,l,o,s){return function(a){var c=n;JSON.stringify(r._id)===JSON.stringify(i._id)?(r.cards.splice(e.index,1),r.cards.splice(t.index,0,l),c.splice(o,1,r),a(N(c))):(r.cards.splice(e.index,1),i.cards.splice(t.index,0,l),c.splice(o,1,r),c.splice(s,1,i),a(N(c)))}}(h,m,0,r,o,s,c,i,l)))})),fetch("/updateListAfterDnD",{method:"PUT",body:JSON.stringify({currentUser:d,destination:m,source:h,draggableId:u}),headers:{"Content-type":"application/json"}}).then((function(e){return e.json()})).then((function(e){t(b(e))})).catch((function(e){console.log(e),alert("hmmmm")}))}}var I={username:"",password:"",isLoggingIn:!1,currentUser:{},currentBoard:{},userBoards:[],error:"",redirect:"",showCardForm:!1,cardTitle:"",cardDescription:"",memberToAdd:"",activeCardModal:null,cardAttributeContent:"",showBoardNameDisplay:!0,showCardDescriptionForm:!1,showCardTitleForm:!1,attributeType:"",isLoading:!1,userList:[],showDuplicateMemberWarning:!1,activeBoardLists:[],currentList:{},currentCard:{},progressValue:0,showChecklistItemForm:!1,showChecklistTitleForm:!1,showAddMemberDropdown:!1,showMemberListDropdown:!1,checklistItem:"",showDeleteListWarningModal:!1,showDeleteBoardWarningModal:!1,showDeleteCardWarningModal:!1};var y={key:"root",storage:h.a,stateReconciler:p.a,blacklist:["redirect","loading","showCardForm","activeCardModal","showCardDescriptionForm"]},_=Object(d.a)(y,(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:I,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GET_DATA_REQUEST":return Object(E.a)({},e,{isLoggingIn:!0});case"GET_DATA_SUCCESS":return console.log("reducer "+JSON.stringify(t.data.user.activeBoard)),Object(E.a)({},e,{isLoggingIn:!1,currentUser:t.data.user,redirect:t.data.redirect,userBoards:t.data.boards,currentBoard:t.data.user.activeBoard,activeBoardLists:t.data.lists});case"GET_DATA_FAILURE":return Object(E.a)({},e,{isLoggingIn:!1,error:t.error});case"HANDLE_USERNAME_INPUT_CHANGE":return Object(E.a)({},e,{username:t.data});case"HANDLE_PASSWORD_INPUT_CHANGE":return Object(E.a)({},e,{password:t.data});case"SET_CURRENT_BOARD":return console.log(t.data),Object(E.a)({},e,{currentBoard:t.data});case"UPDATE_CURRENT_USER":return console.log("current user "+t.data),Object(E.a)({},e,{currentUser:t.data,isLoading:!1});case"CREAT_CARD_FORM":return Object(E.a)({},e,{showCardForm:t.listId,cardTitle:""});case"HIDE_CARD_FORM":return Object(E.a)({},e,{showCardForm:!1});case"CHANGE_TITLE":return Object(E.a)({},e,{cardTitle:t.title});case"CHANGE_ACTIVE_CARD_MODAL":return Object(E.a)({},e,{activeCardModal:e.activeCardModal?null:t.id});case"EDIT_CARD_TITLE":return console.log("decription "+t.attribute),Object(E.a)({},e,{cardTitle:t.title});case"EDIT_CARD_DESCRIPTION":return Object(E.a)({},e,{cardDescription:t.description});case"SHOW_BOARD_NAME_DISPLAY":return Object(E.a)({},e,{showBoardNameDisplay:!e.showBoardNameDisplay});case"SWITCH_TO_CARD_DESCRIPTION_FORM":return Object(E.a)({},e,{showCardDescriptionForm:!0,cardDescription:""});case"SWITCH_TO_CARD_DESCRIPTION_DISPLAY":return Object(E.a)({},e,{showCardDescriptionForm:!1});case"SWITCH_TO_CARD_TITLE_FORM":return Object(E.a)({},e,{showCardTitleForm:!0,attributeType:"title"});case"SWITCH_TO_CARD_TITLE_DISPLAY":return Object(E.a)({},e,{showCardTitleForm:!1});case"TOGGLE_IS_LOADING":return Object(E.a)({},e,{isLoading:!0});case"REDIRECT_AFTER_LOGOUT":return Object(E.a)({},e,{redirect:"/login"});case"UPDATE_USER_LIST":return Object(E.a)({},e,{userList:t.users});case"SELECT_MEMBER_FROM_DROPDOWN":return Object(E.a)({},e,{memberToAdd:t.member});case"DISPLAY_DUPLICATE_MEMBER_WARNING":return Object(E.a)({},e,{showDuplicateMemberWarning:!0});case"CLOSE_DUPLICATE_MEMBER_WARNING":return Object(E.a)({},e,{showDuplicateMemberWarning:!1});case"UPDATE_ACTIVE_BOARD_LISTS":return console.log("lists "+JSON.stringify(t.lists)),Object(E.a)({},e,{activeBoardLists:t.lists});case"SET_CURRENT_LIST_AND_CARD":return Object(E.a)({},e,{currentList:t.listAndCard.currentList,currentCard:t.listAndCard.currentCard});case"SHOW_ADD_ITEM_FORM":return Object(E.a)({},e,{showChecklistItemForm:t.checklistId,attributeType:"checklist-item"});case"HIDE_ADD_ITEM_FORM":return Object(E.a)({},e,{showChecklistItemForm:!1});case"DISPLAY_CHECKLIST_TITLE_FORM":return Object(E.a)({},e,{showChecklistTitleForm:t.checklistId,attributeType:"title"});case"HIDE_CHECKLIST_TITLE_FORM":return Object(E.a)({},e,{showChecklistTitleForm:!1});case"OPEN_MEMBER_DROPDOWN":return Object(E.a)({},e,{showAddMemberDropdown:!e.showAddMemberDropdown});case"ACTIVATE_MEMBER_LIST_DROPDOWN":return Object(E.a)({},e,{showMemberListDropdown:!e.showMemberListDropdown});case"EDIT_CHECKLIST_ITEM_FORM":return Object(E.a)({},e,{checklistItem:t.item});case"SHOW_DELETE_LIST_WARNING_MODAL":return Object(E.a)({},e,{showDeleteListWarningModal:t.listId});case"CLOSE_DELETE_LIST_WARNING_MODAL":return Object(E.a)({},e,{showDeleteListWarningModal:!1});case"SHOW_DELETE_BOARD_WARNING_MODAL":return Object(E.a)({},e,{showDeleteBoardWarningModal:t.boardId});case"CLOSE_DELETE_BOARD_WARNING_MODAL":return Object(E.a)({},e,{showDeleteBoardWarningModal:!1});case"SHOW_DELETE_CARD_WARNING_MODAL":return Object(E.a)({},e,{showDeleteCardWarningModal:t.cardId});case"CLOSE_DELETE_CARD_WARNING_MODAL":return Object(E.a)({},e,{showDeleteCardWarningModal:!1});default:return e}})),S=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||s.d,A=Object(s.e)(_,S(Object(s.a)(c.a))),k=Object(d.b)(A),M=(a(48),a(49),a(50),a(51),a(13)),L=a(17),F=a(6),U=a(7),R=a(9),j=a(8),W=a(10),B=a(3),H=function(e){var t=e.onSubmit,a=e.onUsernameChange,n=e.onPasswordChange;return r.a.createElement("div",{className:"tile is-ancestor is-4",id:"register"},r.a.createElement("div",{className:"card is-4 form-card has-background-grey-lighter"},r.a.createElement("div",{className:"form-header is-size-4"},"Create a New Account"),r.a.createElement("form",{onSubmit:t,className:"card-content"},r.a.createElement("div",{className:"field"},r.a.createElement("div",{className:"control"},r.a.createElement("input",{className:"input",name:"username",type:"email",placeholder:"email",onChange:a}))),r.a.createElement("div",{className:"field"},r.a.createElement("div",{className:"control"},r.a.createElement("input",{className:"input",name:"password",type:"password",placeholder:"Password",onChange:n}))),r.a.createElement("div",{className:"form-footer"},"Already have an account? ",r.a.createElement(M.b,{to:"/login"},"Log In here!")),r.a.createElement("div",{className:"control"},r.a.createElement("button",{className:"button is-primary is-light is-fullwidth"},"Sign Up")))))},P=function(e){function t(){return Object(F.a)(this,t),Object(R.a)(this,Object(j.a)(t).apply(this,arguments))}return Object(W.a)(t,e),Object(U.a)(t,[{key:"render",value:function(){var e=this.props,t=e.onUsernameChange,a=e.onPasswordChange,n=e.onSubmit,i=e.redirect,l=e.currentUser;return i==="/".concat(l.username)?r.a.createElement(L.a,{to:"/".concat(l.username)}):r.a.createElement(H,{onUsernameChange:t,onPasswordChange:a,onSubmit:n})}}]),t}(n.Component),J=Object(B.b)((function(e){return{redirect:e.redirect,currentUser:e.currentUser}}),(function(e){return{onUsernameChange:function(t){var a=t.target.value;console.log(a),e(g(a))},onPasswordChange:function(t){var a=t.target.value;console.log(a),e(f(a))},onSubmit:function(t){e(T(t,"/register"))}}}))(P),G=function(e){var t=e.onSubmit,a=e.onUsernameChange,n=e.onPasswordChange;e.redirect;return r.a.createElement("div",{className:"tile is-ancestor is-4",id:"login"},r.a.createElement("div",{className:"card is-4 form-card has-background-grey-lighter"},r.a.createElement("div",{className:"form-header is-size-4"},"Sign In"),r.a.createElement("form",{onSubmit:t,className:"card-content"},r.a.createElement("div",{className:"field"},r.a.createElement("div",{className:"control"},r.a.createElement("input",{className:"input",name:"username",type:"email",placeholder:"email",onChange:a}))),r.a.createElement("div",{className:"field"},r.a.createElement("div",{className:"control"},r.a.createElement("input",{className:"input",name:"password",type:"password",placeholder:"Password",onChange:n}))),r.a.createElement("div",{className:"form-footer"},"Don't have an account yet? ",r.a.createElement(M.b,{to:"/register"},"Register")," now."),r.a.createElement("div",{className:"control"},r.a.createElement("button",{className:"button is-primary is-light is-fullwidth"},"Sign In")))))},x=function(e){function t(){return Object(F.a)(this,t),Object(R.a)(this,Object(j.a)(t).apply(this,arguments))}return Object(W.a)(t,e),Object(U.a)(t,[{key:"render",value:function(){var e=this.props,t=e.onUsernameChange,a=e.onPasswordChange,n=e.onSubmit,i=e.redirect,l=e.currentUser;return console.log(i),i==="/".concat(l.username)?r.a.createElement(L.a,{to:"/".concat(l.username)}):r.a.createElement(G,{onUsernameChange:t,onPasswordChange:a,onSubmit:n,redirect:i})}}]),t}(n.Component),Y=Object(B.b)((function(e){return{redirect:e.redirect,currentUser:e.currentUser}}),(function(e){return{onUsernameChange:function(t){var a=t.target.value;console.log(a),e(g(a))},onPasswordChange:function(t){var a=t.target.value;console.log(a),e(f(a))},onSubmit:function(t){e(T(t,"/login"))}}}))(x);var z=a(19),V=function(e){var t=e.description,a=e.handleEditCardDescription,n=e.handleUpdateCardDescription,i=e.handleSwitchToCardDescriptionDisplay;e.listId,e.cardId;return r.a.createElement("form",{className:"card-description-form",onSubmit:n},r.a.createElement("textarea",{className:"textarea",onChange:a,defaultValue:t}),r.a.createElement("div",{id:"card-modal-buttons",className:"field is-grouped"},r.a.createElement("p",{className:"control"},r.a.createElement("button",{className:"button is-primary",type:"submit"},"Save"),r.a.createElement("button",{className:"button is-danger",onClick:i},"Cancel"))))},K=function(e){var t=e.description,a=e.handleSwitchToCardDescriptionForm;return r.a.createElement("div",{className:"card card-description-display",onClick:a},r.a.createElement("div",{className:"card-content"},t))},X=function(e){var t=e.title,a=e.handleEditCardTitle,n=e.handleUpdateCardTitle,i=e.handleSwitchToCardTitleDisplay;e.listId,e.cardId;return r.a.createElement("form",{onSubmit:n},r.a.createElement("input",{className:"input",type:"text",onChange:a,defaultValue:t}),r.a.createElement("div",{id:"card-modal-buttons",className:"field is-grouped"},r.a.createElement("p",{className:"control"},r.a.createElement("button",{className:"button is-primary",type:"submit"},"Save"),r.a.createElement("button",{className:"button is-danger",onClick:i},"Cancel"))))},q=function(e){var t=e.title,a=e.handleSwitchToCardTitleForm;return r.a.createElement("div",{className:"card-title-display",onClick:a},t)},Q=function(e){var t=e.handleEditChecklistItemForm,a=e.handleHideAddItemForm,n=e.handleAddChecklistItem;return r.a.createElement("form",{className:"checklist-item-form",onSubmit:n},r.a.createElement("div",null,r.a.createElement("a",{className:"hide-add-item-form delete is-medium",onClick:a}),r.a.createElement("input",{className:"input",type:"text",onChange:t})),r.a.createElement("button",{className:"button",type:"submit"},"Add"))},Z=function(e){var t=e.title,a=e.handleCardAttributeEdit,n=e.handleHideChecklistTitleForm,i=e.handleUpdateChecklistTitle;e.checklistId,e.listId,e.cardId;return r.a.createElement("form",{onSubmit:i},r.a.createElement("input",{className:"input",type:"text",onChange:a,defaultValue:t}),r.a.createElement("div",{id:"checklist-title-buttons",className:"field is-grouped"},r.a.createElement("p",{className:"control"},r.a.createElement("button",{className:"button is-primary",type:"submit"},"Save"),r.a.createElement("button",{className:"button is-danger",onClick:n},"Cancel"))))},$=function(e){var t=e.title,a=e.handleDisplayChecklistTitleForm,n=e.handleDeleteChecklist;return r.a.createElement("div",{className:"checklist-title-display",onClick:a},r.a.createElement("p",{className:"checklist-title"},t),r.a.createElement("div",{className:"delete-checklist"},r.a.createElement("button",{className:"button is-small is-danger is-light",onClick:n},"delete")))},ee=function(e){var t,a,n=e.items,i=e.handleCheckItem,l=e.handleShowAddItemForm,o=e.handleHideAddItemForm,s=e.showChecklistItemForm,c=e.handleAddChecklistItem,d=e.handleDisplayChecklistTitleForm,m=e.handleHideChecklistTitleForm,h=(e.cardId,e.checklistId),u=e.title,p=e.showChecklistTitleForm,E=e.handleUpdateChecklistTitle,C=e.handleDeleteChecklist,g=e.handleEditChecklistItemForm,f=n.map((function(e){var t=e.checked?"checklist-item-label checked":"checklist-item-label";return r.a.createElement("div",{className:"checklistItem",id:e._id},r.a.createElement("input",{type:"checkbox",value:e.content,name:e.content,onClick:i}),r.a.createElement("label",{className:t,for:e.content}," ",e.content))})),b=n.filter((function(e){return e.checked})).length,D=b/n.length*100?b/n.length*100:0;return console.log(b),t=s===h?r.a.createElement(Q,{handleHideAddItemForm:o,handleAddChecklistItem:c,handleEditChecklistItemForm:g}):r.a.createElement("button",{className:"button is-light",onClick:l},"Add an item"),a=p===h?r.a.createElement(Z,{title:u,handleHideChecklistTitleForm:m,handleUpdateChecklistTitle:E}):r.a.createElement($,{title:u,handleDisplayChecklistTitleForm:d,showChecklistTitleForm:p,handleDeleteChecklist:C}),r.a.createElement("div",{id:h,className:"checklist content"},a,r.a.createElement("span",null,D,"%"),r.a.createElement("progress",{class:"progress is-primary is-small",value:D,max:"100"},D,"%"),f,t)},te=function(e){var t=e.currentUser,a=e.attributeContent,n=e.members,i=e.classes,l=e.handleActiveCardModal,o=e.cardId,s=e.handleDeleteCard,c=e.listId,d=e.listName,m=e.handleEditCardTitle,h=e.handleEditCardDescription,u=e.handleUpdateCardTitle,p=e.handleUpdateCardDescription,E=(e.handleAddMemberToCard,e.handleSwitchToCardDescriptionForm),C=e.handleSwitchToCardDescriptionDisplay,g=e.handleSwitchToCardTitleForm,f=e.handleSwitchToCardTitleDisplay,b=e.showCardDescriptionForm,D=e.showCardTitleForm,N=e.isLoading,T=e.handleSelectMemberFromDropdown,v=e.showDuplicateMemberWarning,w=e.handleCloseDuplicateMemberWarning,O=e.handleDeleteMemberFromCard,I=(e.lists,e.currentList),y=e.currentCard,_=e.handleShowAddItemForm,S=e.handleHideAddItemForm,A=e.showChecklistItemForm,k=e.handleCreateChecklist,M=e.handleAddChecklistItem,L=e.handleCheckItem,F=e.handleDisplayChecklistTitleForm,U=e.handleHideChecklistTitleForm,R=e.showChecklistTitleForm,j=e.handleUpdateChecklistTitle,W=e.handleDeleteChecklist,B=e.handleOpenAddMemberDropdown,H=e.showAddMemberDropdown,P=(e.handleActivateMemberListDropdown,e.showMemberListDropdown,e.handleEditChecklistItemForm),J=e.handleShowDeleteCardWarningModal,G=e.handleCloseDeleteCardWarningModal,x=e.showDeleteCardWarningModal;console.log("listId "+c),console.log("carId "+o);var Y,Q,Z,$,te,ae,ne,re,ie,le,oe=t.boards.filter((function(e){return JSON.stringify(e._id)===JSON.stringify(t.activeBoard)}))[0];console.log("currentBoard "+JSON.stringify(oe)),console.log(I),y.activity&&(Y=y.activity.map((function(e){return r.a.createElement("li",{key:e},e)}))),y.checklists&&(ie=y.checklists.map((function(e){var t;return r.a.createElement(ee,(t={items:e.items,handleShowAddItemForm:_,handleHideAddItemForm:S,showChecklistItemForm:A,handleAddChecklistItem:M,handleDisplayChecklistTitleForm:F,handleHideChecklistTitleForm:U,cardId:o,checklistId:e._id,handleCheckItem:L,title:e.title,showChecklistTitleForm:R},Object(z.a)(t,"handleCheckItem",L),Object(z.a)(t,"handleUpdateChecklistTitle",j),Object(z.a)(t,"handleDeleteChecklist",W),Object(z.a)(t,"handleEditChecklistItemForm",P),t))}))),Q=r.a.createElement(V,{description:y.description,handleEditCardDescription:h,handleUpdateCardDescription:p,handleSwitchToCardDescriptionDisplay:C,listName:c,cardId:o}),Z=r.a.createElement(K,{description:N?a:y.description,handleSwitchToCardDescriptionForm:E}),$=r.a.createElement(X,{title:y.title,handleEditCardTitle:m,handleUpdateCardTitle:u,handleSwitchToCardTitleDisplay:f}),te=r.a.createElement(q,{title:N?a:y.title,handleSwitchToCardTitleForm:g}),ae=b?Q:Z,re=y.members.map((function(e){return r.a.createElement("li",{className:"member",key:e},r.a.createElement("div",{className:"member-username"},e),r.a.createElement("a",{className:"remove-link",onClick:O},"remove"))})),n&&(le=n.map((function(e){return r.a.createElement("a",{href:"#",className:"dropdown-item",onClick:T,key:e._id},e.username)}))),ne=D?$:te;var se,ce=v?"notification is-danger is-light":"notification is-danger is-light hidden";se=y.checklists.length>0?r.a.createElement("p",{className:"is-size-4"},"Checklists"):null,console.log(H);var de,me=H?"dropdown member-dropdown is-right is-active":"dropdown member-dropdown is-right";console.log(x),x===o?(console.log("hallo!!"),de="modal delete-warning is-active"):de="modal delete-warning";var he=r.a.createElement("div",{class:de},r.a.createElement("div",{class:"modal-background"}),r.a.createElement("div",{class:"modal-content"},r.a.createElement("div",{className:"box"},r.a.createElement("p",{className:"delete-warning-message"},"This action will permantly delete this card. Are you sure you want to proceed?"),r.a.createElement("div",{className:"field is-grouped delete-warning-buttons"},r.a.createElement("div",{className:"control"},r.a.createElement("button",{className:"button is-primary is-light",onClick:function(){return s(o,c)}},"Yep, I'm done with this card!")),r.a.createElement("div",{className:"control"},r.a.createElement("button",{className:"button is-danger is-light",onClick:G},"Cancel"))))),r.a.createElement("button",{class:"modal-close is-large","aria-label":"close",onClick:G}));return r.a.createElement("div",{id:o,className:i},r.a.createElement("span",{id:c}),r.a.createElement("div",{className:"modal-background"}),r.a.createElement("div",{className:"modal-card"},r.a.createElement("div",{className:"modal-card-head"},r.a.createElement("div",{className:"modal-card-title"},ne,r.a.createElement("p",{className:"in-list is-size-6"},"In list ",d)),r.a.createElement("button",{className:"delete","aria-label":"close",onClick:l})),r.a.createElement("div",{className:"modal-card-body"},r.a.createElement("div",{className:"actions"},r.a.createElement("p",{className:"is-size-4"},"Add"),r.a.createElement("button",{className:"button is-fullwidth is-light",onClick:function(){return k(o,c)}},r.a.createElement("span",{className:"icon action-button-icon is-small"},r.a.createElement("i",{class:"far fa-check-square"})),r.a.createElement("span",null,"Checklist")),r.a.createElement("div",{class:me},r.a.createElement("div",{class:"dropdown-trigger member-dropdown-trigger",onClick:B},r.a.createElement("button",{className:"button is-fullwidth is-light","aria-haspopup":"true","aria-controls":"dropdown-menu2"},r.a.createElement("span",{className:"icon action-button-icon is-small"},r.a.createElement("i",{class:"fas fa-user-plus"})),r.a.createElement("span",null,"Member"))),r.a.createElement("div",{class:"dropdown-menu",id:"dropdown-menu2",role:"menu"},r.a.createElement("div",{class:"dropdown-content"},le))),r.a.createElement("button",{className:"button is-fullwidth is-light"},r.a.createElement("span",{className:"icon action-button-icon is-small"},r.a.createElement("i",{class:"fas fa-paperclip"})),r.a.createElement("span",null,"Attachment"))),r.a.createElement("button",{className:"button is-link is-light is-outlined mark-as-complete",onClick:function(){return J(o)}},r.a.createElement("span",{className:"icon is-small"},r.a.createElement("i",{className:"fas fa-check"})),r.a.createElement("span",null,"Mark as Complete")),r.a.createElement("p",{className:"is-size-4"},"Description"),ae,se,ie,r.a.createElement("div",{className:"members"},r.a.createElement("p",{className:"is-size-4"},"Members"),r.a.createElement("div",{className:ce},r.a.createElement("button",{className:"delete",onClick:w}),"Member already added to card!")),r.a.createElement("div",{className:"content addedMembersList-container"},r.a.createElement("ul",{className:"addedMembersList"},re)),r.a.createElement("div",{className:"modal-card-footer"},r.a.createElement("p",{className:"is-size-4"},"Activity"),r.a.createElement("div",{className:"content"},r.a.createElement("ul",null,Y))))),he)},ae=function(e){var t=e.members;return r.a.createElement("div",{className:"dropdown is-hoverable"},r.a.createElement("div",{className:"dropdown-trigger"},r.a.createElement("span",{className:"tag is-link is-light","aria-haspopup":"true","aria-controls":"dropdown-menu"},"Members")),r.a.createElement("div",{className:"dropdown-menu",id:"dropdown-menu",role:"menu"},r.a.createElement("div",{className:"dropdown-content"},t.length>0?t:"no members yet")))},ne=a(18),re=(a(56),function(e){var t,a=e.currentUser,n=e.attributeContent,i=e.activeCardModal,l=e.handleActiveCardModal,o=e.cardId,s=e.handleDeleteCard,c=e.listId,d=e.listName,m=e.handleEditCardTitle,h=e.handleEditCardDescription,u=e.handleUpdateCardTitle,p=e.handleUpdateCardDescription,E=e.handleAddMemberToCard,C=e.handleSwitchToCardDescriptionForm,g=e.handleSwitchToCardDescriptionDisplay,f=e.handleSwitchToCardTitleForm,b=e.handleSwitchToCardTitleDisplay,D=e.showCardDescriptionForm,N=e.showCardTitleForm,T=e.isLoading,v=e.title,w=e.userList,O=e.handleSelectMemberFromDropdown,I=e.showDuplicateMemberWarning,y=e.handleCloseDuplicateMemberWarning,_=e.handleDeleteMemberFromCard,S=e.index,A=e.lists,k=e.currentList,M=e.handleShowAddItemForm,L=e.handleHideAddItemForm,F=e.showChecklistItemForm,U=e.handleCreateChecklist,R=e.handleAddChecklistItem,j=e.handleCheckItem,W=e.handleDisplayChecklistTitleForm,B=e.handleHideChecklistTitleForm,H=e.showChecklistTitleForm,P=e.handleUpdateChecklistTitle,J=e.handleDeleteChecklist,G=e.handleOpenAddMemberDropdown,x=e.showAddMemberDropdown,Y=e.handleActivateMemberListDropdown,z=e.showMemberListDropdown,V=e.handleEditChecklistItemForm,K=e.handleShowDeleteCardWarningModal,X=e.handleCloseDeleteCardWarningModal,q=e.showDeleteCardWarningModal;t=i===o?"modal is-active is clipped ".concat(o):"modal ".concat(o);var Q,Z=a.boards.filter((function(e){return JSON.stringify(e._id)===JSON.stringify(a.activeBoard)}))[0];console.log("currentBoard "+JSON.stringify(Z)),console.log("lists "+JSON.stringify(A[0]._id)),console.log("listId "+JSON.stringify(c)),console.log(JSON.stringify(k));var $=k.cards.filter((function(e){return JSON.stringify(e._id)===JSON.stringify(o)}))[0];return $.members&&(Q=$.members.map((function(e){return r.a.createElement("div",{className:"member",key:e},e)}))),r.a.createElement(ne.b,{draggableId:o,index:S},(function(e,i){return r.a.createElement("div",Object.assign({},e.draggableProps,e.dragHandleProps,{provided:e,ref:e.innerRef}),r.a.createElement("div",{id:o,className:i.isDragging?"card is-dragging":"card","data-target":o,"aria-haspopup":"true",onClick:l},r.a.createElement(ae,{members:Q}),r.a.createElement("div",{className:"card-content task is-hovered"},v)),r.a.createElement(te,{currentUser:a,cardId:o,attributeContent:n,classes:t,handleActiveCardModal:l,handleDeleteCard:s,listId:c,listName:d,handleUpdateCardTitle:u,handleUpdateCardDescription:p,handleAddMemberToCard:E,handleSwitchToCardDescriptionForm:C,showCardDescriptionForm:D,handleSwitchToCardDescriptionDisplay:g,handleSwitchToCardTitleForm:f,handleSwitchToCardTitleDisplay:b,showCardTitleForm:N,isLoading:T,members:w,handleSelectMemberFromDropdown:O,showDuplicateMemberWarning:I,handleCloseDuplicateMemberWarning:y,handleDeleteMemberFromCard:_,lists:A,currentList:k,currentCard:$,handleShowAddItemForm:M,handleHideAddItemForm:L,showChecklistItemForm:F,handleCreateChecklist:U,handleAddChecklistItem:R,handleCheckItem:j,handleDisplayChecklistTitleForm:W,handleHideChecklistTitleForm:B,showChecklistTitleForm:H,handleUpdateChecklistTitle:P,handleDeleteChecklist:J,handleOpenAddMemberDropdown:G,showAddMemberDropdown:x,handleActivateMemberListDropdown:Y,showMemberListDropdown:z,handleEditCardTitle:m,handleEditCardDescription:h,handleEditChecklistItemForm:V,handleShowDeleteCardWarningModal:K,handleCloseDeleteCardWarningModal:X,showDeleteCardWarningModal:q}))}))}),ie=function(e){function t(){return Object(F.a)(this,t),Object(R.a)(this,Object(j.a)(t).apply(this,arguments))}return Object(W.a)(t,e),Object(U.a)(t,[{key:"render",value:function(){var e=this.props,t=e.currentUser,a=e.attributeContent,n=e.activeCardModal,i=e.handleActiveCardModal,l=e.cardId,o=e.handleDeleteCard,s=e.listId,c=e.listName,d=(e.handleCardAttributeEdit,e.handleUpdateCardTitle),m=e.handleUpdateCardDescription,h=e.handleAddMemberToCard,u=e.handleSwitchToCardDescriptionForm,p=e.handleSwitchToCardDescriptionDisplay,E=e.showCardDescriptionForm,C=e.handleSwitchToCardTitleForm,g=e.handleSwitchToCardTitleDisplay,f=e.showCardTitleForm,b=e.isLoading,D=e.title,N=e.userList,T=e.handleSelectMemberFromDropdown,v=e.showDuplicateMemberWarning,w=e.handleCloseDuplicateMemberWarning,O=e.handleDeleteMemberFromCard,I=e.index,y=e.lists,_=e.currentList,S=e.currentCard,A=e.handleShowAddItemForm,k=e.handleHideAddItemForm,M=e.showChecklistItemForm,L=e.handleCreateChecklist,F=e.handleAddChecklistItem,U=e.handleCheckItem,R=e.handleDisplayChecklistTitleForm,j=e.handleHideChecklistTitleForm,W=e.showChecklistTitleForm,B=e.handleUpdateChecklistTitle,H=e.handleDeleteChecklist,P=e.handleOpenAddMemberDropdown,J=e.showAddMemberDropdown,G=e.handleActivateMemberListDropdown,x=e.ShowMemberListDropdown,Y=e.handleEditCardTitle,z=e.handleEditCardDescription,V=e.handleEditChecklistItemForm,K=e.handleShowDeleteCardWarningModal,X=e.handleCloseDeleteCardWarningModal,q=e.showDeleteCardWarningModal;return console.log(n),r.a.createElement(re,{currentUser:t,attributeContent:a,activeCardModal:n,handleActiveCardModal:i,cardId:l,handleDeleteCard:o,listId:s,listName:c,handleEditCardTitle:Y,handleEditCardDescription:z,handleUpdateCardTitle:d,handleUpdateCardDescription:m,handleAddMemberToCard:h,handleSwitchToCardDescriptionForm:u,handleSwitchToCardDescriptionDisplay:p,handleSwitchToCardTitleForm:C,handleSwitchToCardTitleDisplay:g,showCardDescriptionForm:E,showCardTitleForm:f,isLoading:b,title:D,userList:N,handleSelectMemberFromDropdown:T,showDuplicateMemberWarning:v,handleCloseDuplicateMemberWarning:w,handleDeleteMemberFromCard:O,index:I,lists:y,currentList:_,currentCard:S,handleShowAddItemForm:A,handleHideAddItemForm:k,showChecklistItemForm:M,handleCreateChecklist:L,handleAddChecklistItem:F,handleCheckItem:U,handleDisplayChecklistTitleForm:R,handleHideChecklistTitleForm:j,showChecklistTitleForm:W,handleUpdateChecklistTitle:B,handleDeleteChecklist:H,handleOpenAddMemberDropdown:P,showAddMemberDropdown:J,handleActivateMemberListDropdown:G,ShowMemberListDropdown:x,handleEditChecklistItemForm:V,handleShowDeleteCardWarningModal:K,handleCloseDeleteCardWarningModal:X,showDeleteCardWarningModal:q})}}]),t}(n.Component),le=Object(B.b)((function(e,t){return{currentUser:e.currentUser,title:t.title,cardId:t.cardId,activeCardModal:e.activeCardModal,listId:t.listId,listName:t.listName,showCardDescriptionForm:e.showCardDescriptionForm,showCardTitleForm:e.showCardTitleForm,attributeContent:e.attributeContent,isLoading:e.isLoading,userList:e.userList,showDuplicateMemberWarning:e.showDuplicateMemberWarning,index:t.index,lists:e.activeBoardLists,currentList:e.activeBoardLists.filter((function(e){return JSON.stringify(e._id)===JSON.stringify(t.listId)}))[0],showChecklistItemForm:e.showChecklistItemForm,showChecklistTitleForm:e.showChecklistTitleForm,showAddMemberDropdown:e.showAddMemberDropdown,showMemberListDropdown:e.showMemberListDropdown,showDeleteCardWarningModal:e.showDeleteCardWarningModal}}),(function(e){return{handleActiveCardModal:function(t){var a=t.target.parentElement.id;e(D(a)),e((function(e){fetch("/getAllUsers").then((function(e){return e.json()})).then((function(t){e({type:"UPDATE_USER_LIST",users:t})})).catch((function(e){console.log(e),alert("hmmmm")}))}))},handleDeleteCard:function(t,a){e(function(e,t){return function(a,n){var r=n().currentUser;fetch("deleteCard",{method:"DELETE",body:JSON.stringify({cardId:e,listId:t,currentUser:r}),headers:{"Content-type":"application/json"}}).then((function(e){return e.json()})).then((function(e){a(N(e.lists)),a(b(e.user))})).catch((function(e){console.log(e),alert("hmmmm")}))}}(t,a)),e(D())},handleUpdateCardTitle:function(t){t.preventDefault();var a=t.target.parentElement.parentElement.parentElement.parentElement.id,n=t.target.parentElement.parentElement.parentElement.parentElement.firstChild.id;e(function(e,t,a){return function(e,n){e({type:"TOGGLE_IS_LOADING"});var r=n();console.log(r.cardTitle);var i=r.cardTitle,l=r.currentUser;e({type:"SWITCH_TO_CARD_TITLE_DISPLAY"}),fetch("/updateCardTitle",{method:"PUT",body:JSON.stringify({cardTitle:i,currentUser:l,listId:t,cardId:a}),headers:{"Content-type":"application/json"}}).then((function(e){return e.json()})).then((function(t){e(N(t.lists)),e(b(t.user))})).catch((function(e){console.log(e),alert("hmmmm")}))}}(0,n,a))},handleUpdateCardDescription:function(t){t.preventDefault(),e(function(e){return function(t,a){t({type:"TOGGLE_IS_LOADING"}),t({type:"SWITCH_TO_CARD_DESCRIPTION_DISPLAY"});var n=a(),r=n.cardDescription,i=n.currentUser,l=e.target.parentElement.parentElement.parentElement.id,o=e.target.parentElement.parentElement.parentElement.firstChild.id;fetch("/updateCardDescription",{method:"PUT",body:JSON.stringify({cardDescription:r,currentUser:i,listId:o,cardId:l}),headers:{"Content-type":"application/json"}}).then((function(e){return e.json()})).then((function(e){t(N(e.lists)),t(b(e.user))})).catch((function(e){console.log(e),alert("hmmmm")}))}}(t))},handleAddMemberToCard:function(t){t.preventDefault(),e(w(t))},handleSwitchToCardDescriptionForm:function(){e({type:"SWITCH_TO_CARD_DESCRIPTION_FORM"})},handleSwitchToCardDescriptionDisplay:function(){e({type:"SWITCH_TO_CARD_DESCRIPTION_DISPLAY"})},handleEditCardTitle:function(t){var a=t.target.value;e(function(e){return{type:"EDIT_CARD_TITLE",title:e}}(a))},handleEditCardDescription:function(t){var a=t.target.value;e(function(e){return{type:"EDIT_CARD_DESCRIPTION",description:e}}(a))},handleSwitchToCardTitleForm:function(){e({type:"SWITCH_TO_CARD_TITLE_FORM"})},handleSwitchToCardTitleDisplay:function(){e({type:"SWITCH_TO_CARD_TITLE_DISPLAY"})},handleSelectMemberFromDropdown:function(t){var a=t.target.innerHTML;e(function(e){return{type:"SELECT_MEMBER_FROM_DROPDOWN",member:e}}(a)),e(w(t))},handleCloseDuplicateMemberWarning:function(){e({type:"CLOSE_DUPLICATE_MEMBER_WARNING"})},handleDeleteMemberFromCard:function(t){e(function(e){return function(t,a){var n=a().currentUser,r=e.target.parentElement.parentElement.parentElement.parentElement.parentElement.parentElement.id,i=e.target.parentElement.parentElement.parentElement.parentElement.parentElement.parentElement.firstChild.id,l=e.target.previousSibling.innerHTML;console.log("username "+l),fetch("/deleteMemberFromCard",{method:"DELETE",body:JSON.stringify({username:l,cardId:r,listId:i,currentUser:n}),headers:{"Content-type":"application/json"}}).then((function(e){return e.json()})).then((function(e){t(N(e.lists)),t(b(e.user))})).catch((function(e){console.log(e),alert("hmmmm")}))}}(t))},handleShowAddItemForm:function(t){var a=t.target.parentElement.id;e(function(e){return{type:"SHOW_ADD_ITEM_FORM",checklistId:e}}(a))},handleHideAddItemForm:function(){e({type:"HIDE_ADD_ITEM_FORM"})},handleCreateChecklist:function(t,a){e(function(e,t){return function(a,n){var r=n().currentUser;console.log(e),fetch("/createChecklist",{method:"POST",body:JSON.stringify({cardId:e,listId:t,currentUser:r}),headers:{"Content-type":"application/json"}}).then((function(e){return e.json()})).then((function(e){a(N(e.lists)),a(b(e.user))})).catch((function(e){console.log(e),alert("hmmmm")}))}}(t,a))},handleAddChecklistItem:function(t){t.preventDefault(),e(function(e){return function(t,a){var n=a(),r=n.currentUser,i=e.target.parentElement.id,l=e.target.parentElement.parentElement.parentElement.parentElement.id,o=e.target.parentElement.parentElement.parentElement.parentElement.firstChild.id,s=n.checklistItem;fetch("./addChecklistItem",{method:"POST",body:JSON.stringify({currentUser:r,checklistId:i,cardId:l,listId:o,checklistItemContent:s}),headers:{"Content-type":"application/json"}}).then((function(e){return e.json()})).then((function(e){e.error?alert("Uh oh, something went wrong: "+JSON.stringify(e.error.message)):(t(N(e.lists)),t(b(e.user)))})).catch((function(e){console.log(e),alert("hmmmm")}))}}(t)),e({type:"HIDE_ADD_ITEM_FORM"})},handleCheckItem:function(t){console.log(t.target.parentElement.id),e(function(e){return function(t,a){var n=a(),r=n.currentUser,i=e.target.parentElement.id,l=e.target.parentElement.parentElement.id,o=e.target.parentElement.parentElement.parentElement.parentElement.parentElement.id,s=e.target.parentElement.parentElement.parentElement.parentElement.parentElement.firstChild.id,c=n.attributeType,d=n.cardAttributeContent;fetch("/checkChecklistItem",{method:"PATCH",body:JSON.stringify({currentUser:r,checklistItemId:i,checklistId:l,cardId:o,listId:s,attributeType:c,cardAttributeContent:d}),headers:{"Content-type":"application/json"}}).then((function(e){return e.json()})).then((function(e){t(N(e.lists)),t(b(e.user))})).catch((function(e){console.log(e),alert("hmmmm")}))}}(t))},handleDisplayChecklistTitleForm:function(t){console.log(t.target.parentElement.id);var a=t.target.parentElement.id;e(function(e){return{type:"DISPLAY_CHECKLIST_TITLE_FORM",checklistId:e}}(a))},handleHideChecklistTitleForm:function(t){t.preventDefault(),e({type:"HIDE_CHECKLIST_TITLE_FORM"})},handleUpdateChecklistTitle:function(t){t.preventDefault(),e({type:"HIDE_CHECKLIST_TITLE_FORM"}),e(function(e){return function(t,a){var n=a(),r=n.currentUser,i=e.target.parentElement.id,l=e.target.parentElement.parentElement.parentElement.parentElement.id,o=e.target.parentElement.parentElement.parentElement.parentElement.firstChild.id,s=n.cardAttributeContent;fetch("/updateChecklistTitle",{method:"PATCH",body:JSON.stringify({checklistId:i,currentUser:r,title:s,cardId:l,listId:o}),headers:{"Content-type":"application/json"}}).then((function(e){return e.json()})).then((function(e){t(N(e.lists)),t(b(e.user))})).catch((function(e){console.log(e),alert("hmmmm")}))}}(t))},handleDeleteChecklist:function(t){t.preventDefault(),console.log(t.target.parentElement.parentElement.parentElement.id),e(function(e){return function(t,a){var n=a().currentUser,r=e.target.parentElement.parentElement.parentElement.id,i=e.target.parentElement.parentElement.parentElement.parentElement.parentElement.parentElement.id,l=e.target.parentElement.parentElement.parentElement.parentElement.parentElement.parentElement.firstChild.id;fetch("/deleteChecklist",{method:"DELETE",body:JSON.stringify({checklistId:r,currentUser:n,cardId:i,listId:l}),headers:{"Content-type":"application/json"}}).then((function(e){return e.json()})).then((function(e){t(N(e.lists)),t(b(e.user))})).catch((function(e){console.log(e),alert("hmmmm")}))}}(t))},handleOpenAddMemberDropdown:function(){e({type:"OPEN_MEMBER_DROPDOWN"})},handleActivateMemberListDropdown:function(){e({type:"ACTIVATE_MEMBER_LIST_DROPDOWN"})},handleEditChecklistItemForm:function(t){var a=t.target.value;e(function(e){return{type:"EDIT_CHECKLIST_ITEM_FORM",item:e}}(a))},handleShowDeleteCardWarningModal:function(t){e(function(e){return{type:"SHOW_DELETE_CARD_WARNING_MODAL",cardId:e}}(t))},handleCloseDeleteCardWarningModal:function(t){t.preventDefault(),e({type:"CLOSE_DELETE_CARD_WARNING_MODAL"})}}}))(ie),oe=function(e){var t=e.handleSaveCard,a=e.handleHideCardForm,n=e.handleTitleChange;return r.a.createElement("form",{onSubmit:t},r.a.createElement("textarea",{className:"textarea",onChange:n}),r.a.createElement("div",{className:"field is-grouped",id:"cardForm-buttons"},r.a.createElement("p",{className:"control"},r.a.createElement("button",{className:"button is-primary is-light",type:"submit"},"save")),r.a.createElement("p",{className:"control"},r.a.createElement("button",{className:"button is-danger is-light",onClick:a},"cancel"))))},se=function(e){var t=e.currentUser,a=e.id,n=e.deleteList,i=e.handleListNameChange,l=e.handleSaveCard,o=e.handleShowCardForm,s=e.handleHideCardForm,c=e.showCardForm,d=e.handleTitleChange,m=e.lists,h=e.showDeleteListWarningModal,u=e.handleShowDeleteListWarningModal,p=e.handleCloseDeleteListWarningModal,E=t.boards.filter((function(e){return e._id===t.activeBoard}));console.log(E),console.log("list lists "+JSON.stringify(m)),console.log(a);var C,g,f=m.filter((function(e){return a===e._id}));console.log(f);var b,D=f[0].name,N=f[0].cards;N&&(C=N.map((function(e,t){return r.a.createElement(le,{title:e.title,cardId:e._id,listId:a,listName:f[0].name,key:e._id,index:t})}))),g=c===a?r.a.createElement(oe,{handleSaveCard:l,handleHideCardForm:s,handleTitleChange:d}):null,h===a?(console.log(a),b="modal delete-warning is-active"):b="modal delete-warning";var T=r.a.createElement("div",{class:b},r.a.createElement("div",{class:"modal-background"}),r.a.createElement("div",{class:"modal-content"},r.a.createElement("div",{className:"box"},r.a.createElement("p",{className:"delete-warning-message"},"This action will permantly delete this list. Are you sure you want to proceed?"),r.a.createElement("div",{className:"field is-grouped delete-warning-buttons"},r.a.createElement("div",{className:"control"},r.a.createElement("button",{className:"button is-primary is-light is-outlined",onClick:function(){return n(a)}},"Yes, delete the list")),r.a.createElement("div",{className:"control"},r.a.createElement("button",{className:"button is-danger is-light is-outlined",onClick:p},"Cancel"))))),r.a.createElement("button",{class:"modal-close is-large","aria-label":"close",onClick:p}));return r.a.createElement(ne.c,{droppableId:a},(function(e,t){return r.a.createElement("div",Object.assign({provided:e},e.droppableProps,{ref:e.innerRef,className:t.isDraggingOver?"list tile is-2 is-vertical is-parent notification is-dragging-over":"list tile is-2 is-vertical is-parent notification is-light"}),r.a.createElement("a",{className:"delete-list delete is-medium",onClick:function(){return u(a)}}),r.a.createElement("div",{id:a},r.a.createElement("div",{className:"list-name is-size-5"},r.a.createElement("input",{id:"list-name",className:"input",type:"text",placeholder:"Enter List Name",defaultValue:D,onBlur:i})),C,e.placeholder,g,r.a.createElement("button",{className:"button is-primary is-light is-fullwidth",onClick:o},"+ Add Card")),T)}))},ce=function(e){function t(){return Object(F.a)(this,t),Object(R.a)(this,Object(j.a)(t).apply(this,arguments))}return Object(W.a)(t,e),Object(U.a)(t,[{key:"render",value:function(){var e=this.props,t=e.id,a=e.deleteList,n=e.handleListNameChange,i=e.currentUser,l=e.handleSaveCard,o=e.handleShowCardForm,s=e.handleHideCardForm,c=e.showCardForm,d=e.handleTitleChange,m=e.lists,h=e.showDeleteListWarningModal,u=e.handleShowDeleteListWarningModal,p=e.handleCloseDeleteListWarningModal;return r.a.createElement(se,{id:t,deleteList:a,handleListNameChange:n,currentUser:i,handleSaveCard:l,handleShowCardForm:o,handleHideCardForm:s,showCardForm:c,handleTitleChange:d,lists:m,showDeleteListWarningModal:h,handleShowDeleteListWarningModal:u,handleCloseDeleteListWarningModal:p})}}]),t}(n.Component),de=Object(B.b)((function(e,t){return{id:t.id,currentUser:e.currentUser,showCardForm:e.showCardForm,lists:e.activeBoardLists,showDeleteListWarningModal:e.showDeleteListWarningModal}}),(function(e){return{deleteList:function(t){e(function(e){return function(t,a){var n=a().currentUser;fetch("/deleteList",{method:"DELETE",body:JSON.stringify({listId:e,currentUser:n}),headers:{"content-type":"application/json"}}).then((function(e){return console.log(JSON.stringify(e)),e.json()})).then((function(e){console.log(e),t(N(e.lists)),t(b(e.user))})).catch((function(e){console.log(e),t(C(e)),alert("hmmmm")}))}}(t)),e({type:"CLOSE_DELETE_LIST_WARNING_MODAL"})},handleListNameChange:function(t){var a=t.target.value;e(v(t,a,"/changeListName"))},handleShowCardForm:function(t){var a=t.target.parentElement.id;e(function(e){return{type:"CREAT_CARD_FORM",listId:e}}(a))},handleHideCardForm:function(t){e({type:"HIDE_CARD_FORM"})},handleSaveCard:function(t){e(function(e){return function(t,a){e.preventDefault(),t({type:"HIDE_CARD_FORM"});var n=a(),r=n.currentUser,i=e.target.parentElement.id;console.log("list yo "+i);var l=n.cardTitle;fetch("/createCard",{method:"POST",body:JSON.stringify({listId:i,currentUser:r,title:l}),headers:{"Content-type":"application/json"}}).then((function(e){return e.json()})).then((function(e){e.error?alert(JSON.stringify(e.error)):(t(N(e.lists)),t(b(e.user)))})).catch((function(e){console.log(e),alert("hmmmm")}))}}(t))},handleTitleChange:function(t){var a=t.target.value;console.log(a),e(function(e){return{type:"CHANGE_TITLE",title:e}}(a))},handleShowDeleteListWarningModal:function(t){e(function(e){return{type:"SHOW_DELETE_LIST_WARNING_MODAL",listId:e}}(t))},handleCloseDeleteListWarningModal:function(){e({type:"CLOSE_DELETE_LIST_WARNING_MODAL"})}}}))(ce),me=function(e){var t,a=e.handleClick,n=(e.name,e.lists),i=e.handleBoardNameChange,l=e.currentUser,o=e.showBoardNameDisplay,s=e.handleHideBoardNameDisplay,c=e.handleOnDragEnd;n&&(t=n.map((function(e){return r.a.createElement(de,{id:e._id,key:e._id})})));var d=l.boards.filter((function(e){return JSON.stringify(e._id)===JSON.stringify(l.activeBoard)}));console.log("name display "+o);var m=o?"board-name-display":"board-name-display hidden",h=o?"input is-large has-text-dark has-background-white-bis hidden":"input is-large has-text-dark has-background-white-bis";return console.log("active board "+JSON.stringify(d[0].name)),r.a.createElement("div",{className:"board"},r.a.createElement("div",{className:"is-size-4 board-name"},r.a.createElement("div",null,r.a.createElement("input",{id:"board-name",className:h,type:"text",onBlur:i,defaultValue:d[0].name,placeholder:o?"Enter Board Name...":""})),r.a.createElement("div",{className:m,onClick:s},d[0].name?d[0].name:"Enter Board Name...")),r.a.createElement(ne.a,{onDragEnd:c},t),r.a.createElement("button",{className:"button add-list is-light is-large is-outlined is-primary",onClick:a},"Add A List..."))},he=function(e){function t(){return Object(F.a)(this,t),Object(R.a)(this,Object(j.a)(t).apply(this,arguments))}return Object(W.a)(t,e),Object(U.a)(t,[{key:"render",value:function(){var e=this.props,t=e.handleClick,a=e.currentUser,n=e.currentBoard,i=e.handleBoardNameChange,l=e.showBoardNameDisplay,o=e.handleHideBoardNameDisplay,s=e.handleOnDragEnd,c=e.lists;return n&&n[0]?(console.log("BoardContainer "+JSON.stringify(n)),r.a.createElement(me,{handleClick:t,lists:c,currentBoard:n,handleBoardNameChange:i,currentUser:a,showBoardNameDisplay:l,handleHideBoardNameDisplay:o,handleOnDragEnd:s})):r.a.createElement("div",{className:"no-board is-size-2 has-text-danger"},"no board selected")}}]),t}(n.Component),ue=Object(B.b)((function(e,t){return{currentUser:e.currentUser,currentBoard:t.currentBoard,showBoardNameDisplay:e.showBoardNameDisplay,lists:e.activeBoardLists}}),(function(e){return{handleClick:function(t){e((function(e,t){var a=t();console.log("state "+JSON.stringify(a)),fetch("/createList",{method:"POST",body:JSON.stringify({activeBoard:a.currentUser.activeBoard}),headers:{"Content-type":"application/json"}}).then((function(e){return console.log("json "+JSON.stringify(e)),e.json()})).then((function(t){console.log("json "+JSON.stringify(t)),e(N(t.lists)),e(b(t.user))})).catch((function(t){console.log(t),e(C(t)),alert("hmmmm")}))}))},handleBoardNameChange:function(t){var a=t.target.value;t.target.value="",e(v(t,a,"/changeBoardName")),e({type:"SHOW_BOARD_NAME_DISPLAY"})},handleHideBoardNameDisplay:function(){e({type:"SHOW_BOARD_NAME_DISPLAY"})},handleOnDragEnd:function(t){e(O(t))}}}))(he),pe=function(e){var t=e.handleLogoutClick,a=e.handleCreateBoard,n=e.currentUser,i=e.handleDeleteBoard,l=e.handleActiveBoardSwitch,o=e.redirect,s=e.handleShowDeleteBoardWarningModal,c=e.handleCloseDeleteBoardWarningModal,d=e.showDeleteBoardWarningModal;console.log("active "+JSON.stringify(n));var m,h,u,p=[];if(n.boards&&(n.boards.map((function(e){return p.push(e.name),r.a.createElement(ue,null)})),console.log(JSON.stringify(n.boards)),m=n.boards.map((function(e,t){return console.log(t+" "+e._id),r.a.createElement("a",{className:"navbar-item has-text-black",id:e._id,onClick:l,key:e._id+"1"},e.name?e.name:"board ".concat(t+1))}))),n.activeBoard&&(h=n.boards.filter((function(e){return e._id===n.activeBoard}))),h=r.a.createElement(ue,{currentBoard:h}),console.log(n.activeBoard),"/login"===o)return r.a.createElement(L.a,{to:o});u=d===n.activeBoard?"modal delete-warning is-active":"modal delete-warning";var E=r.a.createElement("div",{class:u},r.a.createElement("div",{class:"modal-background"}),r.a.createElement("div",{class:"modal-content"},r.a.createElement("div",{className:"box"},r.a.createElement("p",{className:"delete-warning-message"},"This action will permantly delete this board. Are you sure you want to proceed?"),r.a.createElement("div",{className:"field is-grouped delete-warning-buttons"},r.a.createElement("div",{className:"control"},r.a.createElement("button",{className:"button is-primary is-light is-outlined",onClick:function(){return i(n.activeBoard)}},"Yes, delete the board")),r.a.createElement("div",{className:"control"},r.a.createElement("button",{className:"button is-danger is-light is-outlined",onClick:c},"Cancel"))))),r.a.createElement("button",{class:"modal-close is-large","aria-label":"close",onClick:c}));return r.a.createElement("div",{className:"show has-background-white-bis"},r.a.createElement("div",null,r.a.createElement("nav",{className:"navbar has-background-grey-light",role:"navigation","aria-label":"main navigation"},r.a.createElement("div",{className:"navbar-brand"},r.a.createElement("div",{className:"navbar-item is-size-1 is-family-secondary has-text-white"},"DJELLO")),r.a.createElement("div",{className:"navbar-end"},r.a.createElement("div",{id:"board-dropdown-board-buttons-container"},r.a.createElement("div",{class:"dropdown board-dropdown is-hoverable is-right"},r.a.createElement("div",{class:"dropdown-trigger"},r.a.createElement("button",{class:"button","aria-haspopup":"true","aria-controls":"dropdown-menu4"},r.a.createElement("span",null,"Boards"),r.a.createElement("span",{class:"icon is-small"},r.a.createElement("i",{class:"fas fa-angle-down","aria-hidden":"true"})))),r.a.createElement("div",{class:"dropdown-menu",id:"dropdown-menu4",role:"menu"},r.a.createElement("div",{class:"dropdown-content"},r.a.createElement("div",{class:"dropdown-item"},m)))),r.a.createElement("div",{id:"add-delete-board"},r.a.createElement("button",{className:"button is-primary is-light create-board-button",title:"create new board",onClick:a},r.a.createElement("span",{className:"icon is-small"},r.a.createElement("i",{className:"fas fa-plus"}))),r.a.createElement("button",{className:"button is-danger is-light delete-board-button",title:"delete current board",onClick:function(){return s(n.activeBoard)}},r.a.createElement("span",{className:"icon is-small"},r.a.createElement("i",{className:"fas fa-minus-circle"}))))),r.a.createElement("div",{className:"navbar-item"},r.a.createElement("div",{className:"logout"},r.a.createElement("a",{className:"button is-danger is-light",onClick:t},"Sign Out")))))),r.a.createElement("div",{className:"current-board"},h),E)},Ee=function(e){function t(){return Object(F.a)(this,t),Object(R.a)(this,Object(j.a)(t).apply(this,arguments))}return Object(W.a)(t,e),Object(U.a)(t,[{key:"render",value:function(){var e=this.props,t=e.handleLogoutClick,a=e.handleCreateBoard,n=e.currentUser,i=e.handleDeleteBoard,l=e.handleActiveBoardSwitch,o=e.redirect,s=e.handleShowDeleteBoardWarningModal,c=e.handleCloseDeleteBoardWarningModal,d=e.showDeleteBoardWarningModal;return r.a.createElement(pe,{handleLogoutClick:t,handleCreateBoard:a,handleDeleteBoard:i,currentUser:n,handleActiveBoardSwitch:l,redirect:o,handleShowDeleteBoardWarningModal:s,handleCloseDeleteBoardWarningModal:c,showDeleteBoardWarningModal:d})}}]),t}(n.Component),Ce=Object(B.b)((function(e){return{currentUser:e.currentUser,redirect:e.redirect,showDeleteBoardWarningModal:e.showDeleteBoardWarningModal}}),(function(e){return{handleLogoutClick:function(t){e((function(e){fetch("/logout",{method:"POST"}).then((function(){return e({type:"REDIRECT_AFTER_LOGOUT"})})).catch((function(t){console.log(t),e(C(t)),alert("Error logging out")}))}))},handleCreateBoard:function(t){e((function(e,t){var a=t().currentUser;fetch("/createBoard",{method:"POST",body:JSON.stringify({currentUser:a}),headers:{"Content-type":"application/json"}}).then((function(e){return console.log(e),e.json()})).then((function(t){e(N(t.lists)),e(b(t.user))})).catch((function(e){alert(e)}))}))},handleDeleteBoard:function(t){var a;e((a=t,function(e,t){console.log("butts"),t(),fetch("/deleteBoard",{method:"DELETE",body:JSON.stringify({board:a}),headers:{"Content-type":"application/json"}}).then((function(e){return e.json()})).then((function(t){console.log("current User "+JSON.stringify(t)),e(b(t))})).catch((function(t){console.log(t),e(C(t)),alert("hmmmm")}))})),e({type:"CLOSE_DELETE_BOARD_WARNING_MODAL"})},handleActiveBoardSwitch:function(t){e(function(e){return function(t,a){var n=a().currentUser,r=e.target.id;console.log("boardId "+r),fetch("switchActiveBoard",{method:"PATCH",body:JSON.stringify({boardId:r,currentUser:n}),headers:{"Content-type":"application/json"}}).then((function(e){return e.json()})).then((function(e){t(N(e.lists)),t(b(e.user))})).catch((function(e){console.log(e),alert("hmmmm")}))}}(t))},handleShowDeleteBoardWarningModal:function(t){e(function(e){return{type:"SHOW_DELETE_BOARD_WARNING_MODAL",boardId:e}}(t))},handleCloseDeleteBoardWarningModal:function(){e({type:"CLOSE_DELETE_BOARD_WARNING_MODAL"})}}}))(Ee),ge=function(){return r.a.createElement("div",{id:"Home",className:"hero is-primary is-bold is-fullheight"},r.a.createElement("div",{className:"hero-body"},r.a.createElement("h1",{className:"is-size-1 has-text-weight-light"},"DJELLO"),r.a.createElement("p",null,"The task manager of tomorrow, today."),r.a.createElement("div",null,r.a.createElement(M.b,{to:"/login"},r.a.createElement("button",{className:"button"},"Sign in")))))};var fe=function(){return r.a.createElement(M.a,null,r.a.createElement("div",{className:"App container is-fluid"},r.a.createElement(L.d,null,r.a.createElement(L.b,{path:"/",exact:!0,component:ge}),r.a.createElement(L.b,{path:"/login",exact:!0,component:Y}),r.a.createElement(L.b,{path:"/register",component:J}),r.a.createElement(L.b,{path:"/:user",component:(e=Ce,function(t){function a(){var e;return Object(F.a)(this,a),(e=Object(R.a)(this,Object(j.a)(a).call(this))).state={loading:!0,redirect:!1},e}return Object(W.a)(a,t),Object(U.a)(a,[{key:"componentDidMount",value:function(){var e=this;fetch("/checkForCurrentUser").then((function(t){if(console.log(t.status),200!==t.status)throw new Error(t.error);e.setState({loading:!1})})).catch((function(t){console.error(t),e.setState({loading:!1,redirect:!0})}))}},{key:"render",value:function(){var t=this.state,a=t.loading,n=t.redirect;return a?null:n?r.a.createElement(L.a,{to:"/login"}):r.a.createElement(e,this.props)}}]),a}(n.Component))}))));var e};l.a.render(r.a.createElement(B.a,{store:A},r.a.createElement(o.a,{loading:null,persistor:k},r.a.createElement(fe,null))),document.getElementById("root"))}},[[37,1,2]]]);
//# sourceMappingURL=main.baca0c7f.chunk.js.map