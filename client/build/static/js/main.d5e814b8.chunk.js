(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{37:function(e,t,a){e.exports=a(59)},48:function(e,t,a){},51:function(e,t,a){},59:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(21),i=a.n(l),o=a(31),c=a(4),s=a(32),d=a(28),m=a(34),h=a.n(m),u=a(35),p=a.n(u),E=a(2);a(45);function C(e){return{type:"GET_DATA_FAILURE",error:e}}function g(e){return{type:"HANDLE_USERNAME_INPUT_CHANGE",data:e}}function f(e){return{type:"HANDLE_PASSWORD_INPUT_CHANGE",data:e}}function D(e){return{type:"UPDATE_CURRENT_USER",data:e}}function b(e){return{type:"CHANGE_ACTIVE_CARD_MODAL",id:e}}function N(e){return{type:"UPDATE_ACTIVE_BOARD_LISTS",lists:e}}function T(){return{type:"CLOSE_ADD_ATTACHMENT_DROPDOWN"}}function w(e,t){return function(a,n){e.preventDefault();var r=n(),l=r.username,i=r.password;console.log(JSON.stringify({username:l,password:i})),fetch(t,{method:"POST",body:JSON.stringify({username:l,password:i}),headers:{"Content-type":"application/json"}}).then((function(e){if(200===e.status)return console.log("Yay!"),e.json();throw console.log("no"),new Error(e.error)})).then((function(e){console.log("submit "+JSON.stringify(e)),a({type:"GET_DATA_SUCCESS",data:e})})).catch((function(e){console.log(e),a(C(e)),alert("Error logging in")}))}}function v(e,t,a){return function(n,r){var l;"/changeListName"===a&&(l=e.target.parentElement.parentElement.id),"/changeBoardName"===a&&(document.getElementById("board-name").innerHTML="",e.target.value="");var i=r().currentUser;console.log("route "+a),fetch(a,{method:"PUT",body:JSON.stringify({componentName:t,currentUser:i,listId:l}),headers:{"Content-type":"application/json"}}).then((function(e){return e.json()})).then((function(e){console.log("change name "+JSON.stringify(e)),"/changeListName"===a?(n(N(e.lists)),n(D(e.user))):n(D(e.user))})).catch((function(e){console.log(e),alert("hmmmm")}))}}function O(e){return function(t,a){t({type:"TOGGLE_IS_LOADING"});var n=a(),r=n.memberToAdd,l=n.currentUser,i=e.target.parentElement.parentElement.parentElement.parentElement.parentElement.parentElement.parentElement.id,o=e.target.parentElement.parentElement.parentElement.parentElement.parentElement.parentElement.parentElement.firstChild.id;fetch("/addMemberToCard",{method:"PUT",body:JSON.stringify({memberUsername:r,currentUser:l,listId:o,cardId:i}),headers:{"Content-type":"application/json"}}).then((function(e){return console.log("res "+JSON.stringify(e)),500===e.status?e:e.json()})).then((function(e){500===e.status?t({type:"DISPLAY_DUPLICATE_MEMBER_WARNING"}):(t(N(e.lists)),t(D(e.user)),t((function(e,t){var a=t();console.log("state"+JSON.stringify(a));var n=a.memberToAdd,r=a.currentUser.activeBoard;fetch("/addBoardToMember",{method:"POST",body:JSON.stringify({username:n,boardId:r}),headers:{"Content-type":"application/json"}}).catch((function(e){console.log(e),alert("hmmmm")}))})))})).catch((function(e){console.log(e),alert("hmmmm")}))}}function A(e){return function(t,a){var n=a(),r=Array.from(n.activeBoardLists);console.log(r);var l,i,o,c,s,d=n.currentUser,m=e.destination,h=e.source,u=e.draggableId;Promise.resolve(o=r.filter((function(e){return JSON.stringify(h.droppableId)===JSON.stringify(e._id)}))[0],r.forEach((function(e,t){JSON.stringify(e._id)===JSON.stringify(h.droppableId)&&(l=t)})),c=r.filter((function(e){return JSON.stringify(m.droppableId)===JSON.stringify(e._id)}))[0],r.forEach((function(e,t){JSON.stringify(e._id)===JSON.stringify(m.droppableId)&&(i=t)})),s=o.cards.filter((function(e){return JSON.stringify(e._id)===JSON.stringify(u)}))[0]).then((function(){console.log(u),console.log("source "+JSON.stringify(h)),console.log("destination "+JSON.stringify(m)),m&&(m.draoppableId===h.droppableId&&m.index===h.index||t(function(e,t,a,n,r,l,i,o,c){return function(a){var s=n;JSON.stringify(r._id)===JSON.stringify(l._id)?(r.cards.splice(e.index,1),r.cards.splice(t.index,0,i),s.splice(o,1,r),a(N(s))):(r.cards.splice(e.index,1),l.cards.splice(t.index,0,i),s.splice(o,1,r),s.splice(c,1,l),a(N(s)))}}(h,m,0,r,o,c,s,l,i)))})),fetch("/updateListAfterDnD",{method:"PUT",body:JSON.stringify({currentUser:d,destination:m,source:h,draggableId:u}),headers:{"Content-type":"application/json"}}).then((function(e){return e.json()})).then((function(e){t(D(e))})).catch((function(e){console.log(e),alert("hmmmm")}))}}function I(e,t,a){return function(n,r){var l=new FormData;l.append("photo",e[0]),fetch("/uploadPhoto",{method:"POST",body:l}).then((function(e){return console.log("mCres "+JSON.stringify(e)),e.json()})).then((function(e){n(function(e,t,a){return function(n,r){var l=r().currentUser;console.log(e),console.log(t),console.log(a),fetch("/addAttachmentUrlToCard",{method:"POST",body:JSON.stringify({url:e,cardId:t,listId:a,currentUser:l}),headers:{"Content-type":"application/json"}}).then((function(e){return console.log(e),e.json()})).then((function(e){console.log(JSON.stringify(e)),n(D(e.user)),n(N(e.lists))}))}}(e.url,t,a))}))}}a(47);var _={username:"",password:"",isLoggingIn:!1,currentUser:{},currentBoard:{},userBoards:[],error:"",redirect:"",showCardForm:!1,cardTitle:"",cardDescription:"",memberToAdd:"",activeCardModal:null,cardAttributeContent:"",showBoardNameDisplay:!0,showCardDescriptionForm:!1,showCardTitleForm:!1,attributeType:"",isLoading:!1,userList:[],showDuplicateMemberWarning:!1,activeBoardLists:[],currentList:{},currentCard:{},progressValue:0,showChecklistItemForm:!1,showChecklistTitleForm:!1,showAddMemberDropdown:!1,showMemberListDropdown:!1,checklistItem:"",showDeleteListWarningModal:!1,showDeleteBoardWarningModal:!1,showDeleteCardWarningModal:!1,checklistTitle:"",showAddAttachmentDropdown:!1,showAttachmentModal:!1};var y={key:"root",storage:h.a,stateReconciler:p.a,blacklist:["redirect","loading","showCardForm","activeCardModal","showCardDescriptionForm"]},S=Object(d.a)(y,(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GET_DATA_REQUEST":return Object(E.a)({},e,{isLoggingIn:!0});case"GET_DATA_SUCCESS":return console.log("reducer "+JSON.stringify(t.data.user.activeBoard)),Object(E.a)({},e,{isLoggingIn:!1,currentUser:t.data.user,redirect:t.data.redirect,userBoards:t.data.boards,currentBoard:t.data.user.activeBoard,activeBoardLists:t.data.lists});case"GET_DATA_FAILURE":return Object(E.a)({},e,{isLoggingIn:!1,error:t.error});case"HANDLE_USERNAME_INPUT_CHANGE":return Object(E.a)({},e,{username:t.data});case"HANDLE_PASSWORD_INPUT_CHANGE":return Object(E.a)({},e,{password:t.data});case"SET_CURRENT_BOARD":return console.log(t.data),Object(E.a)({},e,{currentBoard:t.data});case"UPDATE_CURRENT_USER":return console.log("current user "+t.data),Object(E.a)({},e,{currentUser:t.data,isLoading:!1});case"CREAT_CARD_FORM":return Object(E.a)({},e,{showCardForm:t.listId,cardTitle:""});case"HIDE_CARD_FORM":return Object(E.a)({},e,{showCardForm:!1});case"CHANGE_TITLE":return Object(E.a)({},e,{cardTitle:t.title});case"CHANGE_ACTIVE_CARD_MODAL":return Object(E.a)({},e,{activeCardModal:e.activeCardModal?null:t.id});case"EDIT_CARD_TITLE":return console.log("decription "+t.attribute),Object(E.a)({},e,{cardTitle:t.title});case"EDIT_CARD_DESCRIPTION":return Object(E.a)({},e,{cardDescription:t.description});case"SHOW_BOARD_NAME_DISPLAY":return Object(E.a)({},e,{showBoardNameDisplay:!e.showBoardNameDisplay});case"SWITCH_TO_CARD_DESCRIPTION_FORM":return Object(E.a)({},e,{showCardDescriptionForm:!0,cardDescription:""});case"SWITCH_TO_CARD_DESCRIPTION_DISPLAY":return Object(E.a)({},e,{showCardDescriptionForm:!1});case"SWITCH_TO_CARD_TITLE_FORM":return Object(E.a)({},e,{showCardTitleForm:!0,attributeType:"title"});case"SWITCH_TO_CARD_TITLE_DISPLAY":return Object(E.a)({},e,{showCardTitleForm:!1});case"TOGGLE_IS_LOADING":return Object(E.a)({},e,{isLoading:!0});case"REDIRECT_AFTER_LOGOUT":return Object(E.a)({},e,{redirect:"/login"});case"UPDATE_USER_LIST":return Object(E.a)({},e,{userList:t.users});case"SELECT_MEMBER_FROM_DROPDOWN":return Object(E.a)({},e,{memberToAdd:t.member});case"DISPLAY_DUPLICATE_MEMBER_WARNING":return Object(E.a)({},e,{showDuplicateMemberWarning:!0});case"CLOSE_DUPLICATE_MEMBER_WARNING":return Object(E.a)({},e,{showDuplicateMemberWarning:!1});case"UPDATE_ACTIVE_BOARD_LISTS":return console.log("lists "+JSON.stringify(t.lists)),Object(E.a)({},e,{activeBoardLists:t.lists});case"SET_CURRENT_LIST_AND_CARD":return Object(E.a)({},e,{currentList:t.listAndCard.currentList,currentCard:t.listAndCard.currentCard});case"SHOW_ADD_ITEM_FORM":return Object(E.a)({},e,{showChecklistItemForm:t.checklistId,attributeType:"checklist-item"});case"HIDE_ADD_ITEM_FORM":return Object(E.a)({},e,{showChecklistItemForm:!1});case"DISPLAY_CHECKLIST_TITLE_FORM":return Object(E.a)({},e,{showChecklistTitleForm:t.checklistId,attributeType:"title"});case"HIDE_CHECKLIST_TITLE_FORM":return Object(E.a)({},e,{showChecklistTitleForm:!1});case"OPEN_MEMBER_DROPDOWN":return Object(E.a)({},e,{showAddMemberDropdown:!e.showAddMemberDropdown});case"ACTIVATE_MEMBER_LIST_DROPDOWN":return Object(E.a)({},e,{showMemberListDropdown:!e.showMemberListDropdown});case"EDIT_CHECKLIST_ITEM_FORM":return Object(E.a)({},e,{checklistItem:t.item});case"SHOW_DELETE_LIST_WARNING_MODAL":return Object(E.a)({},e,{showDeleteListWarningModal:t.listId});case"CLOSE_DELETE_LIST_WARNING_MODAL":return Object(E.a)({},e,{showDeleteListWarningModal:!1});case"SHOW_DELETE_BOARD_WARNING_MODAL":return Object(E.a)({},e,{showDeleteBoardWarningModal:t.boardId});case"CLOSE_DELETE_BOARD_WARNING_MODAL":return Object(E.a)({},e,{showDeleteBoardWarningModal:!1});case"SHOW_DELETE_CARD_WARNING_MODAL":return Object(E.a)({},e,{showDeleteCardWarningModal:t.cardId});case"CLOSE_DELETE_CARD_WARNING_MODAL":return Object(E.a)({},e,{showDeleteCardWarningModal:!1});case"EDIT_CHECKLIST_TITLE_FORM":return Object(E.a)({},e,{checklistTitle:t.checklistTitle});case"TOGGLE_ADD_ATTACHMENT_DROPDOWN":return Object(E.a)({},e,{showAddAttachmentDropdown:!e.showAddAttachmentDropdown&&t.cardId});case"CLOSE_ADD_ATTACHMENT_DROPDOWN":return Object(E.a)({},e,{showAddAttachmentDropdown:!1});case"OPEN_ATTACHEMENT_MODAL":return Object(E.a)({},e,{showAttachmentModal:!e.showAttachmentModal&&t.url});default:return e}})),k=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||c.d,M=Object(c.e)(S,k(Object(c.a)(s.a))),L=Object(d.b)(M),F=(a(48),a(49),a(50),a(51),a(13)),U=a(17),j=a(6),R=a(7),W=a(9),B=a(8),H=a(10),P=a(3),J=function(e){var t=e.onSubmit,a=e.onUsernameChange,n=e.onPasswordChange;return r.a.createElement("div",{className:"login-container has-background-primary"},r.a.createElement("div",{className:"tile is-ancestor is-4",id:"register"},r.a.createElement("div",{className:"card is-4 form-card has-background-grey-lighter"},r.a.createElement("div",{className:"login-djello is-size-1"},"DJELLO"),r.a.createElement("div",{className:"form-header is-size-4"},"Create a New Account"),r.a.createElement("form",{onSubmit:t,className:"card-content"},r.a.createElement("div",{className:"field"},r.a.createElement("div",{className:"control"},r.a.createElement("input",{className:"input",name:"username",type:"email",placeholder:"email",onChange:a}))),r.a.createElement("div",{className:"field"},r.a.createElement("div",{className:"control"},r.a.createElement("input",{className:"input",name:"password",type:"password",placeholder:"Password",onChange:n}))),r.a.createElement("div",{className:"form-footer"},"Already have an account? ",r.a.createElement(F.b,{to:"/login"},"Log In here!")),r.a.createElement("div",{className:"control"},r.a.createElement("button",{className:"button is-primary is-light is-fullwidth"},"Sign Up"))))))},G=function(e){function t(){return Object(j.a)(this,t),Object(W.a)(this,Object(B.a)(t).apply(this,arguments))}return Object(H.a)(t,e),Object(R.a)(t,[{key:"render",value:function(){var e=this.props,t=e.onUsernameChange,a=e.onPasswordChange,n=e.onSubmit,l=e.redirect,i=e.currentUser;return l==="/".concat(i.username)?r.a.createElement(U.a,{to:"/".concat(i.username)}):r.a.createElement(J,{onUsernameChange:t,onPasswordChange:a,onSubmit:n})}}]),t}(n.Component),x=Object(P.b)((function(e){return{redirect:e.redirect,currentUser:e.currentUser}}),(function(e){return{onUsernameChange:function(t){var a=t.target.value;console.log(a),e(g(a))},onPasswordChange:function(t){var a=t.target.value;console.log(a),e(f(a))},onSubmit:function(t){e(w(t,"/register"))}}}))(G),Y=function(e){var t=e.onSubmit,a=e.onUsernameChange,n=e.onPasswordChange;e.redirect;return r.a.createElement("div",{className:"login-container has-background-primary"},r.a.createElement("div",{className:"tile is-ancestor is-4",id:"login"},r.a.createElement("div",{className:"card is-4 form-card has-background-grey-lighter"},r.a.createElement("div",{className:"login-djello is-size-1"},"DJELLO"),r.a.createElement("div",{className:"form-header is-size-4"},"Sign In"),r.a.createElement("form",{onSubmit:t,className:"card-content"},r.a.createElement("div",{className:"field"},r.a.createElement("div",{className:"control"},r.a.createElement("input",{className:"input",name:"username",type:"email",placeholder:"email",onChange:a}))),r.a.createElement("div",{className:"field"},r.a.createElement("div",{className:"control"},r.a.createElement("input",{className:"input",name:"password",type:"password",placeholder:"Password",onChange:n}))),r.a.createElement("div",{className:"form-footer"},"Don't have an account yet? ",r.a.createElement(F.b,{to:"/register"},"Register")," ","now."),r.a.createElement("div",{className:"control"},r.a.createElement("button",{className:"button is-primary is-light is-fullwidth"},"Sign In"))))))},z=function(e){function t(){return Object(j.a)(this,t),Object(W.a)(this,Object(B.a)(t).apply(this,arguments))}return Object(H.a)(t,e),Object(R.a)(t,[{key:"render",value:function(){var e=this.props,t=e.onUsernameChange,a=e.onPasswordChange,n=e.onSubmit,l=e.redirect,i=e.currentUser;return console.log(l),l==="/".concat(i.username)?r.a.createElement(U.a,{to:"/".concat(i.username)}):r.a.createElement(Y,{onUsernameChange:t,onPasswordChange:a,onSubmit:n,redirect:l})}}]),t}(n.Component),V=Object(P.b)((function(e){return{redirect:e.redirect,currentUser:e.currentUser}}),(function(e){return{onUsernameChange:function(t){var a=t.target.value;console.log(a),e(g(a))},onPasswordChange:function(t){var a=t.target.value;console.log(a),e(f(a))},onSubmit:function(t){e(w(t,"/login"))}}}))(z);var K=a(18),q=function(e){var t=e.description,a=e.handleEditCardDescription,n=e.handleUpdateCardDescription,l=e.handleSwitchToCardDescriptionDisplay;e.listId,e.cardId;return r.a.createElement("form",{className:"card-description-form",onSubmit:n},r.a.createElement("textarea",{className:"textarea",onChange:a,defaultValue:t}),r.a.createElement("div",{id:"card-modal-buttons",className:"field is-grouped"},r.a.createElement("p",{className:"control"},r.a.createElement("button",{className:"button is-primary",type:"submit"},"Save"),r.a.createElement("button",{className:"button is-danger",onClick:l},"Cancel"))))},X=function(e){var t=e.description,a=e.handleSwitchToCardDescriptionForm;return r.a.createElement("div",{className:"card card-description-display",onClick:a},r.a.createElement("div",{className:"card-content"},t))},Q=function(e){var t=e.title,a=e.handleEditCardTitle,n=e.handleUpdateCardTitle,l=e.handleSwitchToCardTitleDisplay;e.listId,e.cardId;return r.a.createElement("form",{onSubmit:n},r.a.createElement("input",{className:"input",type:"text",onChange:a,defaultValue:t}),r.a.createElement("div",{id:"card-modal-buttons",className:"field is-grouped"},r.a.createElement("p",{className:"control"},r.a.createElement("button",{className:"button is-primary",type:"submit"},"Save"),r.a.createElement("button",{className:"button is-danger",onClick:l},"Cancel"))))},Z=function(e){var t=e.title,a=e.handleSwitchToCardTitleForm;return r.a.createElement("div",{className:"card-title-display",onClick:a},t)},$=function(e){var t=e.handleEditChecklistItemForm,a=e.handleHideAddItemForm,n=e.handleAddChecklistItem;return r.a.createElement("form",{className:"checklist-item-form",onSubmit:n},r.a.createElement("div",null,r.a.createElement("a",{className:"hide-add-item-form delete is-medium",onClick:a}),r.a.createElement("input",{className:"input",type:"text",onChange:t})),r.a.createElement("button",{className:"button",type:"submit"},"Add"))},ee=function(e){var t=e.title,a=e.handleHideChecklistTitleForm,n=e.handleUpdateChecklistTitle,l=e.handleEditChecklistTitleForm;e.checklistId,e.listId,e.cardId;return r.a.createElement("form",{onSubmit:n},r.a.createElement("input",{className:"input",type:"text",onChange:l,defaultValue:t}),r.a.createElement("div",{id:"checklist-title-buttons",className:"field is-grouped"},r.a.createElement("p",{className:"control"},r.a.createElement("button",{className:"button is-primary",type:"submit"},"Save"),r.a.createElement("button",{className:"button is-danger",onClick:a},"Cancel"))))},te=function(e){var t=e.title,a=e.handleDisplayChecklistTitleForm,n=e.handleDeleteChecklist;return r.a.createElement("div",{className:"checklist-title-display",onClick:a},r.a.createElement("p",{className:"checklist-title"},t),r.a.createElement("div",{className:"delete-checklist"},r.a.createElement("button",{className:"button is-small is-danger is-light",onClick:n},"delete")))},ae=function(e){var t,a,n=e.items,l=e.handleCheckItem,i=e.handleShowAddItemForm,o=e.handleHideAddItemForm,c=e.showChecklistItemForm,s=e.handleAddChecklistItem,d=e.handleDisplayChecklistTitleForm,m=e.handleHideChecklistTitleForm,h=(e.cardId,e.checklistId),u=e.title,p=e.showChecklistTitleForm,E=e.handleUpdateChecklistTitle,C=e.handleDeleteChecklist,g=e.handleEditChecklistItemForm,f=e.handleEditChecklistTitleForm,D=n.map((function(e){var t=e.checked?"checklist-item-label checked":"checklist-item-label";return r.a.createElement("div",{className:"checklistItem",id:e._id},r.a.createElement("input",{type:"checkbox",value:e.content,name:e.content,onClick:l}),r.a.createElement("label",{className:t,for:e.content}," ",e.content))})),b=n.filter((function(e){return e.checked})).length,N=b/n.length*100?b/n.length*100:0;return console.log(b),t=c===h?r.a.createElement($,{handleHideAddItemForm:o,handleAddChecklistItem:s,handleEditChecklistItemForm:g}):r.a.createElement("button",{className:"button is-light",onClick:i},"Add an item"),a=p===h?r.a.createElement(ee,{title:u,handleEditChecklistTitleForm:f,handleHideChecklistTitleForm:m,handleUpdateChecklistTitle:E}):r.a.createElement(te,{title:u,handleDisplayChecklistTitleForm:d,showChecklistTitleForm:p,handleDeleteChecklist:C}),r.a.createElement("div",{id:h,className:"checklist content"},a,r.a.createElement("span",null,N,"%"),r.a.createElement("progress",{class:"progress is-primary is-small",value:N,max:"100"},N,"%"),D,t)},ne=function(e){var t=e.handleUploadFile,a=e.cardId,n=e.listId;return r.a.createElement("form",{onSubmit:function(e){return t(e,a,n)}},r.a.createElement("input",{className:"input",type:"file",name:"attachment",accept:".png, jpeg, .gif, .jpg, .tiff"}),r.a.createElement("div",{className:"upload-attachment"},r.a.createElement("button",{className:"button upload-attachment-button is-primary is-light is-outlined",type:"submit"},"Upload")))},re=function(e){var t=e.currentUser,a=e.attributeContent,n=e.members,l=e.classes,i=e.handleActiveCardModal,o=e.cardId,c=e.handleDeleteCard,s=e.listId,d=e.listName,m=e.handleEditCardTitle,h=e.handleEditCardDescription,u=e.handleUpdateCardTitle,p=e.handleUpdateCardDescription,E=(e.handleAddMemberToCard,e.handleSwitchToCardDescriptionForm),C=e.handleSwitchToCardDescriptionDisplay,g=e.handleSwitchToCardTitleForm,f=e.handleSwitchToCardTitleDisplay,D=e.showCardDescriptionForm,b=e.showCardTitleForm,N=e.isLoading,T=e.handleSelectMemberFromDropdown,w=e.showDuplicateMemberWarning,v=e.handleCloseDuplicateMemberWarning,O=e.handleDeleteMemberFromCard,A=(e.lists,e.currentList),I=e.currentCard,_=e.handleShowAddItemForm,y=e.handleHideAddItemForm,S=e.showChecklistItemForm,k=e.handleCreateChecklist,M=e.handleAddChecklistItem,L=e.handleCheckItem,F=e.handleDisplayChecklistTitleForm,U=e.handleHideChecklistTitleForm,j=e.showChecklistTitleForm,R=e.handleUpdateChecklistTitle,W=e.handleDeleteChecklist,B=e.handleOpenAddMemberDropdown,H=e.showAddMemberDropdown,P=(e.handleActivateMemberListDropdown,e.showMemberListDropdown,e.handleEditChecklistItemForm),J=e.handleShowDeleteCardWarningModal,G=e.handleCloseDeleteCardWarningModal,x=e.showDeleteCardWarningModal,Y=e.handleEditChecklistTitleForm,z=e.handleToggleAddAttachmentDropdown,V=(e.handleCloseAddAttachmentDropdown,e.showAddAttachmentDropdown),$=e.handleUploadFile,ee=e.handleOpenAttachmentModal,te=e.showAttachmentModal;console.log("listId "+s),console.log("carId "+o);var re,le,ie,oe,ce,se,de,me,he,ue,pe=t.boards.filter((function(e){return JSON.stringify(e._id)===JSON.stringify(t.activeBoard)}))[0];console.log("currentBoard "+JSON.stringify(pe)),console.log(A),I.activity&&(re=I.activity.map((function(e){return r.a.createElement("li",{key:e},e)}))),I.checklists&&(he=I.checklists.map((function(e){var t;return r.a.createElement(ae,(t={items:e.items,handleShowAddItemForm:_,handleHideAddItemForm:y,showChecklistItemForm:S,handleAddChecklistItem:M,handleDisplayChecklistTitleForm:F,handleHideChecklistTitleForm:U,cardId:o,checklistId:e._id,handleCheckItem:L,title:e.title,showChecklistTitleForm:j},Object(K.a)(t,"handleCheckItem",L),Object(K.a)(t,"handleUpdateChecklistTitle",R),Object(K.a)(t,"handleDeleteChecklist",W),Object(K.a)(t,"handleEditChecklistItemForm",P),Object(K.a)(t,"handleEditChecklistTitleForm",Y),t))}))),le=r.a.createElement(q,{description:I.description,handleEditCardDescription:h,handleUpdateCardDescription:p,handleSwitchToCardDescriptionDisplay:C,listName:s,cardId:o}),ie=r.a.createElement(X,{description:N?a:I.description,handleSwitchToCardDescriptionForm:E}),oe=r.a.createElement(Q,{title:I.title,handleEditCardTitle:m,handleUpdateCardTitle:u,handleSwitchToCardTitleDisplay:f}),ce=r.a.createElement(Z,{title:N?a:I.title,handleSwitchToCardTitleForm:g}),se=D?le:ie,me=I.members.map((function(e){return r.a.createElement("li",{className:"member",key:e},r.a.createElement("div",{className:"member-username"},e),r.a.createElement("a",{className:"remove-link",onClick:O},"remove"))})),n&&(ue=n.map((function(e){return r.a.createElement("a",{href:"#",className:"dropdown-item",onClick:T,key:e._id},e.username)}))),de=b?oe:ce;var Ee,Ce=w?"notification is-danger is-light":"notification is-danger is-light hidden";Ee=I.checklists.length>0?r.a.createElement("p",{className:"is-size-4"},"Checklists"):null,console.log(H);var ge,fe=H?"dropdown member-dropdown is-right is-active":"dropdown member-dropdown is-right";console.log(x),x===o?(console.log("hallo!!"),ge="modal delete-warning is-active"):ge="modal delete-warning";var De,be=r.a.createElement("div",{class:ge},r.a.createElement("div",{class:"modal-background"}),r.a.createElement("div",{class:"modal-content"},r.a.createElement("div",{className:"box"},r.a.createElement("p",{className:"delete-warning-message"},"This action will permantly delete this card. Are you sure you want to proceed?"),r.a.createElement("div",{className:"field is-grouped delete-warning-buttons"},r.a.createElement("div",{className:"control"},r.a.createElement("button",{className:"button is-primary is-light",onClick:function(){return c(o,s)}},"Yep, I'm done with this card!")),r.a.createElement("div",{className:"control"},r.a.createElement("button",{className:"button is-danger is-light",onClick:G},"Cancel"))))),r.a.createElement("button",{class:"modal-close is-large","aria-label":"close",onClick:G}));De=V===o?"dropdown add-attachment-dropdown is-right is-active":"dropdown add-attachment-dropdown is-right";var Ne=null;return I.attachments&&(Ne=I.attachments.map((function(e){var t;return console.log(te),t=te===e?"modal is-active":"modal",r.a.createElement("div",{className:"image-div",id:e},r.a.createElement("img",{className:"attachment",src:e,onClick:ee}),r.a.createElement("div",{class:t},r.a.createElement("div",{class:"modal-background"}),r.a.createElement("div",{class:"modal-content"},r.a.createElement("p",{class:"image"},r.a.createElement("img",{src:e,alt:""}))),r.a.createElement("button",{class:"modal-close is-large","aria-label":"close",onClick:ee})))}))),r.a.createElement("div",{id:o,className:l},r.a.createElement("span",{id:s}),r.a.createElement("div",{className:"modal-background"}),r.a.createElement("div",{className:"modal-card"},r.a.createElement("div",{className:"modal-card-head"},r.a.createElement("div",{className:"modal-card-title"},de,r.a.createElement("p",{className:"in-list is-size-6"},"In list ",d)),r.a.createElement("button",{className:"delete","aria-label":"close",onClick:i})),r.a.createElement("div",{className:"modal-card-body"},r.a.createElement("div",{className:"actions"},r.a.createElement("p",{className:"is-size-4"},"Add"),r.a.createElement("button",{className:"button is-fullwidth is-light",onClick:function(){return k(o,s)}},r.a.createElement("span",{className:"icon action-button-icon is-small"},r.a.createElement("i",{className:"far fa-check-square"})),r.a.createElement("span",null,"Checklist")),r.a.createElement("div",{className:fe},r.a.createElement("div",{class:"dropdown-trigger member-dropdown-trigger",onClick:B},r.a.createElement("button",{className:"button is-fullwidth is-light","aria-haspopup":"true","aria-controls":"dropdown-menu2"},r.a.createElement("span",{className:"icon action-button-icon is-small"},r.a.createElement("i",{className:"fas fa-user-plus"})),r.a.createElement("span",null,"Member"))),r.a.createElement("div",{className:"dropdown-menu",id:"dropdown-menu3",role:"menu"},r.a.createElement("div",{className:"dropdown-content"},ue))),r.a.createElement("div",{className:De},r.a.createElement("div",{className:"dropdown-trigger member-dropdown-trigger"},r.a.createElement("button",{className:"button is-fullwidth is-light","aria-haspopup":"true","aria-controls":"dropdown-menu3",onClick:function(){return z(o)}},r.a.createElement("span",{className:"icon action-button-icon is-small"},r.a.createElement("i",{class:"fas fa-paperclip"})),r.a.createElement("span",null,"Attachment"))),r.a.createElement("div",{className:"dropdown-menu",id:"dropdown-menu3",role:"menu"},r.a.createElement("div",{className:"dropdown-content attachment-dropdown-content"},r.a.createElement(ne,{handleUploadFile:$,cardId:o,listId:s}))))),r.a.createElement("button",{className:"button is-link is-light is-outlined mark-as-complete",onClick:function(){return J(o)}},r.a.createElement("span",{className:"icon is-small"},r.a.createElement("i",{className:"fas fa-check"})),r.a.createElement("span",null,"Mark as Complete")),r.a.createElement("p",{className:"is-size-4"},"Description"),se,Ee,he,r.a.createElement("div",{className:"members"},r.a.createElement("p",{className:"is-size-4"},"Members"),r.a.createElement("div",{className:Ce},r.a.createElement("button",{className:"delete",onClick:v}),"Member already added to card!")),r.a.createElement("div",{className:"content addedMembersList-container"},r.a.createElement("ul",{className:"addedMembersList"},me)),r.a.createElement("div",{className:"attachments"},r.a.createElement("p",{className:"is-size-4"},"Attachments"),r.a.createElement("div",{className:"attachment-images"},Ne)),r.a.createElement("div",{className:"modal-card-footer"},r.a.createElement("p",{className:"is-size-4"},"Activity"),r.a.createElement("div",{className:"content"},r.a.createElement("ul",null,re))))),be)},le=function(e){var t=e.members;return r.a.createElement("div",{className:"dropdown is-hoverable"},r.a.createElement("div",{className:"dropdown-trigger"},r.a.createElement("span",{className:"tag is-link is-light","aria-haspopup":"true","aria-controls":"dropdown-menu"},"Members")),r.a.createElement("div",{className:"dropdown-menu",id:"dropdown-menu",role:"menu"},r.a.createElement("div",{className:"dropdown-content"},t.length>0?t:"no members yet")))},ie=a(19),oe=(a(56),function(e){var t,a=e.currentUser,n=e.attributeContent,l=e.activeCardModal,i=e.handleActiveCardModal,o=e.cardId,c=e.handleDeleteCard,s=e.listId,d=e.listName,m=e.handleEditCardTitle,h=e.handleEditCardDescription,u=e.handleUpdateCardTitle,p=e.handleUpdateCardDescription,E=e.handleAddMemberToCard,C=e.handleSwitchToCardDescriptionForm,g=e.handleSwitchToCardDescriptionDisplay,f=e.handleSwitchToCardTitleForm,D=e.handleSwitchToCardTitleDisplay,b=e.showCardDescriptionForm,N=e.showCardTitleForm,T=e.isLoading,w=e.title,v=e.userList,O=e.handleSelectMemberFromDropdown,A=e.showDuplicateMemberWarning,I=e.handleCloseDuplicateMemberWarning,_=e.handleDeleteMemberFromCard,y=e.index,S=e.lists,k=e.currentList,M=e.handleShowAddItemForm,L=e.handleHideAddItemForm,F=e.showChecklistItemForm,U=e.handleCreateChecklist,j=e.handleAddChecklistItem,R=e.handleCheckItem,W=e.handleDisplayChecklistTitleForm,B=e.handleHideChecklistTitleForm,H=e.showChecklistTitleForm,P=e.handleUpdateChecklistTitle,J=e.handleDeleteChecklist,G=e.handleOpenAddMemberDropdown,x=e.showAddMemberDropdown,Y=e.handleActivateMemberListDropdown,z=e.showMemberListDropdown,V=e.handleEditChecklistItemForm,K=e.handleShowDeleteCardWarningModal,q=e.handleCloseDeleteCardWarningModal,X=e.showDeleteCardWarningModal,Q=e.handleEditChecklistTitleForm,Z=e.handleToggleAddAttachmentDropdown,$=e.handleCloseAddAttachmentDropdown,ee=e.showAddAttachmentDropdown,te=e.handleUploadFile,ae=e.handleOpenAttachmentModal,ne=e.showAttachmentModal;t=l===o?"modal is-active is clipped ".concat(o):"modal ".concat(o);var oe,ce=a.boards.filter((function(e){return JSON.stringify(e._id)===JSON.stringify(a.activeBoard)}))[0];console.log("currentBoard "+JSON.stringify(ce)),console.log("lists "+JSON.stringify(S[0]._id)),console.log("listId "+JSON.stringify(s)),console.log(JSON.stringify(k));var se=k.cards.filter((function(e){return JSON.stringify(e._id)===JSON.stringify(o)}))[0];se.members&&(oe=se.members.map((function(e){return r.a.createElement("div",{className:"member",key:e},e)})));var de,me=0,he=0;se.checklists&&se.checklists.forEach((function(e){me+=e.items.length,he+=e.items.filter((function(e){return e.checked})).length})),de=me>0?r.a.createElement("span",{className:"card-icon has-text-grey"},r.a.createElement("i",{class:"far fa-check-square"})," ",he,"/",me):null;var ue,pe=0;return se.attachments&&(pe=se.attachments.length),pe>0?ue=r.a.createElement("span",{className:"card-icon has-text-grey"},r.a.createElement("i",{class:"fas fa-paperclip"})," ",pe):pe=null,console.log("totalChecklistItems "+me),console.log("checkedCheklist "+he),r.a.createElement(ie.b,{draggableId:o,index:y},(function(e,l){return r.a.createElement("div",Object.assign({},e.draggableProps,e.dragHandleProps,{provided:e,ref:e.innerRef}),r.a.createElement("div",{id:o,className:l.isDragging?"card is-dragging":"card","data-target":o,"aria-haspopup":"true",onClick:i},r.a.createElement(le,{members:oe}),r.a.createElement("div",{className:"card-content task is-hovered"},w),r.a.createElement("div",{className:"card-icons"},de," ",ue)),r.a.createElement(re,{currentUser:a,cardId:o,attributeContent:n,classes:t,handleActiveCardModal:i,handleDeleteCard:c,listId:s,listName:d,handleUpdateCardTitle:u,handleUpdateCardDescription:p,handleAddMemberToCard:E,handleSwitchToCardDescriptionForm:C,showCardDescriptionForm:b,handleSwitchToCardDescriptionDisplay:g,handleSwitchToCardTitleForm:f,handleSwitchToCardTitleDisplay:D,showCardTitleForm:N,isLoading:T,members:v,handleSelectMemberFromDropdown:O,showDuplicateMemberWarning:A,handleCloseDuplicateMemberWarning:I,handleDeleteMemberFromCard:_,lists:S,currentList:k,currentCard:se,handleShowAddItemForm:M,handleHideAddItemForm:L,showChecklistItemForm:F,handleCreateChecklist:U,handleAddChecklistItem:j,handleCheckItem:R,handleDisplayChecklistTitleForm:W,handleHideChecklistTitleForm:B,showChecklistTitleForm:H,handleUpdateChecklistTitle:P,handleDeleteChecklist:J,handleOpenAddMemberDropdown:G,showAddMemberDropdown:x,handleActivateMemberListDropdown:Y,showMemberListDropdown:z,handleEditCardTitle:m,handleEditCardDescription:h,handleEditChecklistItemForm:V,handleShowDeleteCardWarningModal:K,handleCloseDeleteCardWarningModal:q,showDeleteCardWarningModal:X,handleEditChecklistTitleForm:Q,handleToggleAddAttachmentDropdown:Z,handleCloseAddAttachmentDropdown:$,showAddAttachmentDropdown:ee,handleUploadFile:te,handleOpenAttachmentModal:ae,showAttachmentModal:ne}))}))}),ce=function(e){function t(){return Object(j.a)(this,t),Object(W.a)(this,Object(B.a)(t).apply(this,arguments))}return Object(H.a)(t,e),Object(R.a)(t,[{key:"render",value:function(){var e=this.props,t=e.currentUser,a=e.attributeContent,n=e.activeCardModal,l=e.handleActiveCardModal,i=e.cardId,o=e.handleDeleteCard,c=e.listId,s=e.listName,d=(e.handleCardAttributeEdit,e.handleUpdateCardTitle),m=e.handleUpdateCardDescription,h=e.handleAddMemberToCard,u=e.handleSwitchToCardDescriptionForm,p=e.handleSwitchToCardDescriptionDisplay,E=e.showCardDescriptionForm,C=e.handleSwitchToCardTitleForm,g=e.handleSwitchToCardTitleDisplay,f=e.showCardTitleForm,D=e.isLoading,b=e.title,N=e.userList,T=e.handleSelectMemberFromDropdown,w=e.showDuplicateMemberWarning,v=e.handleCloseDuplicateMemberWarning,O=e.handleDeleteMemberFromCard,A=e.index,I=e.lists,_=e.currentList,y=e.currentCard,S=e.handleShowAddItemForm,k=e.handleHideAddItemForm,M=e.showChecklistItemForm,L=e.handleCreateChecklist,F=e.handleAddChecklistItem,U=e.handleCheckItem,j=e.handleDisplayChecklistTitleForm,R=e.handleHideChecklistTitleForm,W=e.showChecklistTitleForm,B=e.handleUpdateChecklistTitle,H=e.handleDeleteChecklist,P=e.handleOpenAddMemberDropdown,J=e.showAddMemberDropdown,G=e.handleActivateMemberListDropdown,x=e.ShowMemberListDropdown,Y=e.handleEditCardTitle,z=e.handleEditCardDescription,V=e.handleEditChecklistItemForm,K=e.handleShowDeleteCardWarningModal,q=e.handleCloseDeleteCardWarningModal,X=e.showDeleteCardWarningModal,Q=e.handleEditChecklistTitleForm,Z=e.handleToggleAddAttachmentDropdown,$=e.handleCloseAddAttachmentDropdown,ee=e.showAddAttachmentDropdown,te=e.handleUploadFile,ae=e.handleOpenAttachmentModal,ne=e.showAttachmentModal;return console.log(n),r.a.createElement(oe,{currentUser:t,attributeContent:a,activeCardModal:n,handleActiveCardModal:l,cardId:i,handleDeleteCard:o,listId:c,listName:s,handleEditCardTitle:Y,handleEditCardDescription:z,handleUpdateCardTitle:d,handleUpdateCardDescription:m,handleAddMemberToCard:h,handleSwitchToCardDescriptionForm:u,handleSwitchToCardDescriptionDisplay:p,handleSwitchToCardTitleForm:C,handleSwitchToCardTitleDisplay:g,showCardDescriptionForm:E,showCardTitleForm:f,isLoading:D,title:b,userList:N,handleSelectMemberFromDropdown:T,showDuplicateMemberWarning:w,handleCloseDuplicateMemberWarning:v,handleDeleteMemberFromCard:O,index:A,lists:I,currentList:_,currentCard:y,handleShowAddItemForm:S,handleHideAddItemForm:k,showChecklistItemForm:M,handleCreateChecklist:L,handleAddChecklistItem:F,handleCheckItem:U,handleDisplayChecklistTitleForm:j,handleHideChecklistTitleForm:R,showChecklistTitleForm:W,handleUpdateChecklistTitle:B,handleDeleteChecklist:H,handleOpenAddMemberDropdown:P,showAddMemberDropdown:J,handleActivateMemberListDropdown:G,ShowMemberListDropdown:x,handleEditChecklistItemForm:V,handleShowDeleteCardWarningModal:K,handleCloseDeleteCardWarningModal:q,showDeleteCardWarningModal:X,handleEditChecklistTitleForm:Q,handleToggleAddAttachmentDropdown:Z,handleCloseAddAttachmentDropdown:$,showAddAttachmentDropdown:ee,handleUploadFile:te,handleOpenAttachmentModal:ae,showAttachmentModal:ne})}}]),t}(n.Component),se=Object(P.b)((function(e,t){return{currentUser:e.currentUser,title:t.title,cardId:t.cardId,activeCardModal:e.activeCardModal,listId:t.listId,listName:t.listName,showCardDescriptionForm:e.showCardDescriptionForm,showCardTitleForm:e.showCardTitleForm,attributeContent:e.attributeContent,isLoading:e.isLoading,userList:e.userList,showDuplicateMemberWarning:e.showDuplicateMemberWarning,index:t.index,lists:e.activeBoardLists,currentList:e.activeBoardLists.filter((function(e){return JSON.stringify(e._id)===JSON.stringify(t.listId)}))[0],showChecklistItemForm:e.showChecklistItemForm,showChecklistTitleForm:e.showChecklistTitleForm,showAddMemberDropdown:e.showAddMemberDropdown,showMemberListDropdown:e.showMemberListDropdown,showDeleteCardWarningModal:e.showDeleteCardWarningModal,showAddAttachmentDropdown:e.showAddAttachmentDropdown,showAttachmentModal:e.showAttachmentModal}}),(function(e){return{handleActiveCardModal:function(t){var a=t.target.parentElement.id;e(b(a)),e((function(e){fetch("/getAllUsers").then((function(e){return e.json()})).then((function(t){e({type:"UPDATE_USER_LIST",users:t})})).catch((function(e){console.log(e),alert("hmmmm")}))}))},handleDeleteCard:function(t,a){e(function(e,t){return function(a,n){var r=n().currentUser;fetch("deleteCard",{method:"DELETE",body:JSON.stringify({cardId:e,listId:t,currentUser:r}),headers:{"Content-type":"application/json"}}).then((function(e){return e.json()})).then((function(e){a(N(e.lists)),a(D(e.user))})).catch((function(e){console.log(e),alert("hmmmm")}))}}(t,a)),e(b())},handleUpdateCardTitle:function(t){t.preventDefault();var a=t.target.parentElement.parentElement.parentElement.parentElement.id,n=t.target.parentElement.parentElement.parentElement.parentElement.firstChild.id;e(function(e,t,a){return function(e,n){e({type:"TOGGLE_IS_LOADING"});var r=n();console.log(r.cardTitle);var l=r.cardTitle,i=r.currentUser;e({type:"SWITCH_TO_CARD_TITLE_DISPLAY"}),fetch("/updateCardTitle",{method:"PUT",body:JSON.stringify({cardTitle:l,currentUser:i,listId:t,cardId:a}),headers:{"Content-type":"application/json"}}).then((function(e){return e.json()})).then((function(t){e(N(t.lists)),e(D(t.user))})).catch((function(e){console.log(e),alert("hmmmm")}))}}(0,n,a))},handleUpdateCardDescription:function(t){t.preventDefault(),e(function(e){return function(t,a){t({type:"TOGGLE_IS_LOADING"}),t({type:"SWITCH_TO_CARD_DESCRIPTION_DISPLAY"});var n=a(),r=n.cardDescription,l=n.currentUser,i=e.target.parentElement.parentElement.parentElement.id,o=e.target.parentElement.parentElement.parentElement.firstChild.id;fetch("/updateCardDescription",{method:"PUT",body:JSON.stringify({cardDescription:r,currentUser:l,listId:o,cardId:i}),headers:{"Content-type":"application/json"}}).then((function(e){return e.json()})).then((function(e){t(N(e.lists)),t(D(e.user))})).catch((function(e){console.log(e),alert("hmmmm")}))}}(t))},handleAddMemberToCard:function(t){t.preventDefault(),e(O(t))},handleSwitchToCardDescriptionForm:function(){e({type:"SWITCH_TO_CARD_DESCRIPTION_FORM"})},handleSwitchToCardDescriptionDisplay:function(){e({type:"SWITCH_TO_CARD_DESCRIPTION_DISPLAY"})},handleEditCardTitle:function(t){var a=t.target.value;e(function(e){return{type:"EDIT_CARD_TITLE",title:e}}(a))},handleEditCardDescription:function(t){var a=t.target.value;e(function(e){return{type:"EDIT_CARD_DESCRIPTION",description:e}}(a))},handleSwitchToCardTitleForm:function(){e({type:"SWITCH_TO_CARD_TITLE_FORM"})},handleSwitchToCardTitleDisplay:function(){e({type:"SWITCH_TO_CARD_TITLE_DISPLAY"})},handleSelectMemberFromDropdown:function(t){var a=t.target.innerHTML;e(function(e){return{type:"SELECT_MEMBER_FROM_DROPDOWN",member:e}}(a)),e(O(t))},handleCloseDuplicateMemberWarning:function(){e({type:"CLOSE_DUPLICATE_MEMBER_WARNING"})},handleDeleteMemberFromCard:function(t){e(function(e){return function(t,a){var n=a().currentUser,r=e.target.parentElement.parentElement.parentElement.parentElement.parentElement.parentElement.id,l=e.target.parentElement.parentElement.parentElement.parentElement.parentElement.parentElement.firstChild.id,i=e.target.previousSibling.innerHTML;console.log("username "+i),fetch("/deleteMemberFromCard",{method:"DELETE",body:JSON.stringify({username:i,cardId:r,listId:l,currentUser:n}),headers:{"Content-type":"application/json"}}).then((function(e){return e.json()})).then((function(e){t(N(e.lists)),t(D(e.user))})).catch((function(e){console.log(e),alert("hmmmm")}))}}(t))},handleShowAddItemForm:function(t){var a=t.target.parentElement.id;e(function(e){return{type:"SHOW_ADD_ITEM_FORM",checklistId:e}}(a))},handleHideAddItemForm:function(){e({type:"HIDE_ADD_ITEM_FORM"})},handleCreateChecklist:function(t,a){e(function(e,t){return function(a,n){var r=n().currentUser;console.log(e),fetch("/createChecklist",{method:"POST",body:JSON.stringify({cardId:e,listId:t,currentUser:r}),headers:{"Content-type":"application/json"}}).then((function(e){return e.json()})).then((function(e){a(N(e.lists)),a(D(e.user))})).catch((function(e){console.log(e),alert("hmmmm")}))}}(t,a))},handleAddChecklistItem:function(t){t.preventDefault(),e(function(e){return function(t,a){var n=a(),r=n.currentUser,l=e.target.parentElement.id,i=e.target.parentElement.parentElement.parentElement.parentElement.id,o=e.target.parentElement.parentElement.parentElement.parentElement.firstChild.id,c=n.checklistItem;fetch("./addChecklistItem",{method:"POST",body:JSON.stringify({currentUser:r,checklistId:l,cardId:i,listId:o,checklistItemContent:c}),headers:{"Content-type":"application/json"}}).then((function(e){return e.json()})).then((function(e){e.error?alert("Uh oh, something went wrong: "+JSON.stringify(e.error.message)):(t(N(e.lists)),t(D(e.user)))})).catch((function(e){console.log(e),alert("hmmmm")}))}}(t)),e({type:"HIDE_ADD_ITEM_FORM"})},handleCheckItem:function(t){console.log(t.target.parentElement.id),e(function(e){return function(t,a){var n=a(),r=n.currentUser,l=e.target.parentElement.id,i=e.target.parentElement.parentElement.id,o=e.target.parentElement.parentElement.parentElement.parentElement.parentElement.id,c=e.target.parentElement.parentElement.parentElement.parentElement.parentElement.firstChild.id,s=n.attributeType,d=n.cardAttributeContent;fetch("/checkChecklistItem",{method:"PATCH",body:JSON.stringify({currentUser:r,checklistItemId:l,checklistId:i,cardId:o,listId:c,attributeType:s,cardAttributeContent:d}),headers:{"Content-type":"application/json"}}).then((function(e){return e.json()})).then((function(e){t(N(e.lists)),t(D(e.user))})).catch((function(e){console.log(e),alert("hmmmm")}))}}(t))},handleDisplayChecklistTitleForm:function(t){console.log(t.target.parentElement.id);var a=t.target.parentElement.id;e(function(e){return{type:"DISPLAY_CHECKLIST_TITLE_FORM",checklistId:e}}(a))},handleHideChecklistTitleForm:function(t){t.preventDefault(),e({type:"HIDE_CHECKLIST_TITLE_FORM"})},handleUpdateChecklistTitle:function(t){t.preventDefault(),e({type:"HIDE_CHECKLIST_TITLE_FORM"}),e(function(e){return function(t,a){var n=a(),r=n.currentUser,l=e.target.parentElement.id,i=e.target.parentElement.parentElement.parentElement.parentElement.id,o=e.target.parentElement.parentElement.parentElement.parentElement.firstChild.id,c=n.checklistTitle;fetch("/updateChecklistTitle",{method:"PATCH",body:JSON.stringify({checklistId:l,currentUser:r,title:c,cardId:i,listId:o}),headers:{"Content-type":"application/json"}}).then((function(e){return e.json()})).then((function(e){t(N(e.lists)),t(D(e.user))})).catch((function(e){console.log(e),alert("hmmmm")}))}}(t))},handleDeleteChecklist:function(t){t.preventDefault(),console.log(t.target.parentElement.parentElement.parentElement.id),e(function(e){return function(t,a){var n=a().currentUser,r=e.target.parentElement.parentElement.parentElement.id,l=e.target.parentElement.parentElement.parentElement.parentElement.parentElement.parentElement.id,i=e.target.parentElement.parentElement.parentElement.parentElement.parentElement.parentElement.firstChild.id;fetch("/deleteChecklist",{method:"DELETE",body:JSON.stringify({checklistId:r,currentUser:n,cardId:l,listId:i}),headers:{"Content-type":"application/json"}}).then((function(e){return e.json()})).then((function(e){t(N(e.lists)),t(D(e.user))})).catch((function(e){console.log(e),alert("hmmmm")}))}}(t))},handleOpenAddMemberDropdown:function(){e({type:"OPEN_MEMBER_DROPDOWN"})},handleActivateMemberListDropdown:function(){e({type:"ACTIVATE_MEMBER_LIST_DROPDOWN"})},handleEditChecklistItemForm:function(t){var a=t.target.value;e(function(e){return{type:"EDIT_CHECKLIST_ITEM_FORM",item:e}}(a))},handleEditChecklistTitleForm:function(t){var a=t.target.value;e(function(e){return{type:"EDIT_CHECKLIST_TITLE_FORM",checklistTitle:e}}(a))},handleShowDeleteCardWarningModal:function(t){e(function(e){return{type:"SHOW_DELETE_CARD_WARNING_MODAL",cardId:e}}(t))},handleCloseDeleteCardWarningModal:function(t){t.preventDefault(),e({type:"CLOSE_DELETE_CARD_WARNING_MODAL"})},handleToggleAddAttachmentDropdown:function(t){e(function(e){return{type:"TOGGLE_ADD_ATTACHMENT_DROPDOWN",cardId:e}}(t))},handleCloseAddAttachmentDropdown:function(){e(T)},handleUploadFile:function(t,a,n){t.preventDefault();var r=t.target.firstChild.files;e(I(r,a,n))},handleOpenAttachmentModal:function(t){var a=t.target.parentElement.id;e(function(e){return{type:"OPEN_ATTACHEMENT_MODAL",url:e}}(a))}}}))(ce),de=function(e){var t=e.handleSaveCard,a=e.handleHideCardForm,n=e.handleTitleChange;return r.a.createElement("form",{onSubmit:t},r.a.createElement("textarea",{className:"textarea",onChange:n}),r.a.createElement("div",{className:"field is-grouped",id:"cardForm-buttons"},r.a.createElement("p",{className:"control"},r.a.createElement("button",{className:"button is-primary is-light",type:"submit"},"save")),r.a.createElement("p",{className:"control"},r.a.createElement("button",{className:"button is-danger is-light",onClick:a},"cancel"))))},me=function(e){var t=e.currentUser,a=e.id,n=e.deleteList,l=e.handleListNameChange,i=e.handleSaveCard,o=e.handleShowCardForm,c=e.handleHideCardForm,s=e.showCardForm,d=e.handleTitleChange,m=e.lists,h=e.showDeleteListWarningModal,u=e.handleShowDeleteListWarningModal,p=e.handleCloseDeleteListWarningModal,E=t.boards.filter((function(e){return e._id===t.activeBoard}));console.log(E),console.log("list lists "+JSON.stringify(m)),console.log(a);var C,g,f=m.filter((function(e){return a===e._id}));console.log(f);var D,b=f[0].name,N=f[0].cards;N&&(C=N.map((function(e,t){return r.a.createElement(se,{title:e.title,cardId:e._id,listId:a,listName:f[0].name,key:e._id,index:t})}))),g=s===a?r.a.createElement(de,{handleSaveCard:i,handleHideCardForm:c,handleTitleChange:d}):null,h===a?(console.log(a),D="modal delete-warning is-active"):D="modal delete-warning";var T=r.a.createElement("div",{class:D},r.a.createElement("div",{class:"modal-background"}),r.a.createElement("div",{class:"modal-content"},r.a.createElement("div",{className:"box"},r.a.createElement("p",{className:"delete-warning-message"},"This action will permantly delete this list. Are you sure you want to proceed?"),r.a.createElement("div",{className:"field is-grouped delete-warning-buttons"},r.a.createElement("div",{className:"control"},r.a.createElement("button",{className:"button is-primary is-light is-outlined",onClick:function(){return n(a)}},"Yes, delete the list")),r.a.createElement("div",{className:"control"},r.a.createElement("button",{className:"button is-danger is-light is-outlined",onClick:p},"Cancel"))))),r.a.createElement("button",{class:"modal-close is-large","aria-label":"close",onClick:p}));return r.a.createElement(ie.c,{droppableId:a},(function(e,t){return r.a.createElement("div",Object.assign({provided:e},e.droppableProps,{ref:e.innerRef,className:t.isDraggingOver?"list tile is-2 is-vertical is-parent notification is-dragging-over":"list tile is-2 is-vertical is-parent notification is-light"}),r.a.createElement("a",{className:"delete-list delete is-medium",onClick:function(){return u(a)}}),r.a.createElement("div",{id:a},r.a.createElement("div",{className:"list-name is-size-5"},r.a.createElement("input",{id:"list-name",className:"input",type:"text",placeholder:"Enter List Name",defaultValue:b,onBlur:l})),C,e.placeholder,g,r.a.createElement("button",{className:"button is-primary is-light is-fullwidth",onClick:o},"+ Add Card")),T)}))},he=function(e){function t(){return Object(j.a)(this,t),Object(W.a)(this,Object(B.a)(t).apply(this,arguments))}return Object(H.a)(t,e),Object(R.a)(t,[{key:"render",value:function(){var e=this.props,t=e.id,a=e.deleteList,n=e.handleListNameChange,l=e.currentUser,i=e.handleSaveCard,o=e.handleShowCardForm,c=e.handleHideCardForm,s=e.showCardForm,d=e.handleTitleChange,m=e.lists,h=e.showDeleteListWarningModal,u=e.handleShowDeleteListWarningModal,p=e.handleCloseDeleteListWarningModal;return r.a.createElement(me,{id:t,deleteList:a,handleListNameChange:n,currentUser:l,handleSaveCard:i,handleShowCardForm:o,handleHideCardForm:c,showCardForm:s,handleTitleChange:d,lists:m,showDeleteListWarningModal:h,handleShowDeleteListWarningModal:u,handleCloseDeleteListWarningModal:p})}}]),t}(n.Component),ue=Object(P.b)((function(e,t){return{id:t.id,currentUser:e.currentUser,showCardForm:e.showCardForm,lists:e.activeBoardLists,showDeleteListWarningModal:e.showDeleteListWarningModal}}),(function(e){return{deleteList:function(t){e(function(e){return function(t,a){var n=a().currentUser;fetch("/deleteList",{method:"DELETE",body:JSON.stringify({listId:e,currentUser:n}),headers:{"content-type":"application/json"}}).then((function(e){return console.log(JSON.stringify(e)),e.json()})).then((function(e){console.log(e),t(N(e.lists)),t(D(e.user))})).catch((function(e){console.log(e),t(C(e)),alert("hmmmm")}))}}(t)),e({type:"CLOSE_DELETE_LIST_WARNING_MODAL"})},handleListNameChange:function(t){var a=t.target.value;e(v(t,a,"/changeListName"))},handleShowCardForm:function(t){var a=t.target.parentElement.id;e(function(e){return{type:"CREAT_CARD_FORM",listId:e}}(a))},handleHideCardForm:function(t){e({type:"HIDE_CARD_FORM"})},handleSaveCard:function(t){e(function(e){return function(t,a){e.preventDefault(),t({type:"HIDE_CARD_FORM"});var n=a(),r=n.currentUser,l=e.target.parentElement.id;console.log("list yo "+l);var i=n.cardTitle;fetch("/createCard",{method:"POST",body:JSON.stringify({listId:l,currentUser:r,title:i}),headers:{"Content-type":"application/json"}}).then((function(e){return e.json()})).then((function(e){e.error?alert(JSON.stringify(e.error)):(t(N(e.lists)),t(D(e.user)))})).catch((function(e){console.log(e),alert("hmmmm")}))}}(t))},handleTitleChange:function(t){var a=t.target.value;console.log(a),e(function(e){return{type:"CHANGE_TITLE",title:e}}(a))},handleShowDeleteListWarningModal:function(t){e(function(e){return{type:"SHOW_DELETE_LIST_WARNING_MODAL",listId:e}}(t))},handleCloseDeleteListWarningModal:function(){e({type:"CLOSE_DELETE_LIST_WARNING_MODAL"})}}}))(he),pe=function(e){var t,a=e.handleClick,n=(e.name,e.lists),l=e.handleBoardNameChange,i=e.currentUser,o=e.showBoardNameDisplay,c=e.handleHideBoardNameDisplay,s=e.handleOnDragEnd;n&&(t=n.map((function(e){return r.a.createElement(ue,{id:e._id,key:e._id})})));var d=i.boards.filter((function(e){return JSON.stringify(e._id)===JSON.stringify(i.activeBoard)}));console.log("name display "+o);var m=o?"board-name-display":"board-name-display hidden",h=o?"input is-large has-text-dark has-background-white-bis hidden":"input is-large has-text-dark has-background-white-bis";return console.log("active board "+JSON.stringify(d[0].name)),r.a.createElement("div",{className:"board"},r.a.createElement("div",{className:"is-size-4 board-name"},r.a.createElement("div",null,r.a.createElement("input",{id:"board-name",className:h,type:"text",onBlur:l,defaultValue:d[0].name,placeholder:o?"Enter Board Name...":""})),r.a.createElement("div",{className:m,onClick:c},d[0].name?d[0].name:"Enter Board Name...")),r.a.createElement(ie.a,{onDragEnd:s},t),r.a.createElement("button",{className:"button add-list is-light is-large is-outlined is-primary",onClick:a},"Add A List..."))},Ee=function(e){function t(){return Object(j.a)(this,t),Object(W.a)(this,Object(B.a)(t).apply(this,arguments))}return Object(H.a)(t,e),Object(R.a)(t,[{key:"render",value:function(){var e=this.props,t=e.handleClick,a=e.currentUser,n=e.currentBoard,l=e.handleBoardNameChange,i=e.showBoardNameDisplay,o=e.handleHideBoardNameDisplay,c=e.handleOnDragEnd,s=e.lists;return n&&n[0]?(console.log("BoardContainer "+JSON.stringify(n)),r.a.createElement(pe,{handleClick:t,lists:s,currentBoard:n,handleBoardNameChange:l,currentUser:a,showBoardNameDisplay:i,handleHideBoardNameDisplay:o,handleOnDragEnd:c})):r.a.createElement("div",{className:"no-board is-size-2 has-text-danger"},"no board selected")}}]),t}(n.Component),Ce=Object(P.b)((function(e,t){return{currentUser:e.currentUser,currentBoard:t.currentBoard,showBoardNameDisplay:e.showBoardNameDisplay,lists:e.activeBoardLists}}),(function(e){return{handleClick:function(t){e((function(e,t){var a=t();console.log("state "+JSON.stringify(a)),fetch("/createList",{method:"POST",body:JSON.stringify({activeBoard:a.currentUser.activeBoard}),headers:{"Content-type":"application/json"}}).then((function(e){return console.log("json "+JSON.stringify(e)),e.json()})).then((function(t){console.log("json "+JSON.stringify(t)),e(N(t.lists)),e(D(t.user))})).catch((function(t){console.log(t),e(C(t)),alert("hmmmm")}))}))},handleBoardNameChange:function(t){var a=t.target.value;t.target.value="",e(v(t,a,"/changeBoardName")),e({type:"SHOW_BOARD_NAME_DISPLAY"})},handleHideBoardNameDisplay:function(){e({type:"SHOW_BOARD_NAME_DISPLAY"})},handleOnDragEnd:function(t){e(A(t))}}}))(Ee),ge=function(e){var t=e.handleLogoutClick,a=e.handleCreateBoard,n=e.currentUser,l=e.handleDeleteBoard,i=e.handleActiveBoardSwitch,o=e.redirect,c=e.handleShowDeleteBoardWarningModal,s=e.handleCloseDeleteBoardWarningModal,d=e.showDeleteBoardWarningModal;console.log("active "+JSON.stringify(n));var m,h,u,p=[];if(n.boards&&(n.boards.map((function(e){return p.push(e.name),r.a.createElement(Ce,null)})),console.log(JSON.stringify(n.boards)),m=n.boards.map((function(e,t){return console.log(t+" "+e._id),r.a.createElement("a",{className:"navbar-item has-text-black",id:e._id,onClick:i,key:e._id+"1"},e.name?e.name:"board ".concat(t+1))}))),n.activeBoard&&(h=n.boards.filter((function(e){return e._id===n.activeBoard}))),h=r.a.createElement(Ce,{currentBoard:h}),console.log(n.activeBoard),"/login"===o)return r.a.createElement(U.a,{to:o});u=d===n.activeBoard?"modal delete-warning is-active":"modal delete-warning";var E=r.a.createElement("div",{class:u},r.a.createElement("div",{class:"modal-background"}),r.a.createElement("div",{class:"modal-content"},r.a.createElement("div",{className:"box"},r.a.createElement("p",{className:"delete-warning-message"},"This action will permantly delete this board. Are you sure you want to proceed?"),r.a.createElement("div",{className:"field is-grouped delete-warning-buttons"},r.a.createElement("div",{className:"control"},r.a.createElement("button",{className:"button is-primary is-light is-outlined",onClick:function(){return l(n.activeBoard)}},"Yes, delete the board")),r.a.createElement("div",{className:"control"},r.a.createElement("button",{className:"button is-danger is-light is-outlined",onClick:s},"Cancel"))))),r.a.createElement("button",{class:"modal-close is-large","aria-label":"close",onClick:s}));return r.a.createElement("div",{className:"show has-background-white-bis"},r.a.createElement("div",null,r.a.createElement("nav",{className:"navbar has-background-grey-light",role:"navigation","aria-label":"main navigation"},r.a.createElement("div",{className:"navbar-brand"},r.a.createElement("div",{className:"navbar-item is-size-1 is-family-secondary has-text-white"},"DJELLO")),r.a.createElement("div",{className:"navbar-end"},r.a.createElement("div",{id:"board-dropdown-board-buttons-container"},r.a.createElement("div",{class:"dropdown board-dropdown is-hoverable is-right"},r.a.createElement("div",{class:"dropdown-trigger"},r.a.createElement("button",{class:"button","aria-haspopup":"true","aria-controls":"dropdown-menu4"},r.a.createElement("span",null,"Boards"),r.a.createElement("span",{class:"icon is-small"},r.a.createElement("i",{class:"fas fa-angle-down","aria-hidden":"true"})))),r.a.createElement("div",{class:"dropdown-menu",id:"dropdown-menu4",role:"menu"},r.a.createElement("div",{class:"dropdown-content"},r.a.createElement("div",{class:"dropdown-item"},m)))),r.a.createElement("div",{id:"add-delete-board"},r.a.createElement("button",{className:"button is-primary is-light create-board-button",title:"create new board",onClick:a},r.a.createElement("span",{className:"icon is-small"},r.a.createElement("i",{className:"fas fa-plus"}))),r.a.createElement("button",{className:"button is-danger is-light delete-board-button",title:"delete current board",onClick:function(){return c(n.activeBoard)}},r.a.createElement("span",{className:"icon is-small"},r.a.createElement("i",{className:"fas fa-minus-circle"}))))),r.a.createElement("div",{className:"navbar-item"},r.a.createElement("div",{className:"logout"},r.a.createElement("a",{className:"button is-danger is-light",onClick:t},"Sign Out")))))),r.a.createElement("div",{className:"current-board"},h),E)},fe=function(e){function t(){return Object(j.a)(this,t),Object(W.a)(this,Object(B.a)(t).apply(this,arguments))}return Object(H.a)(t,e),Object(R.a)(t,[{key:"render",value:function(){var e=this.props,t=e.handleLogoutClick,a=e.handleCreateBoard,n=e.currentUser,l=e.handleDeleteBoard,i=e.handleActiveBoardSwitch,o=e.redirect,c=e.handleShowDeleteBoardWarningModal,s=e.handleCloseDeleteBoardWarningModal,d=e.showDeleteBoardWarningModal;return r.a.createElement(ge,{handleLogoutClick:t,handleCreateBoard:a,handleDeleteBoard:l,currentUser:n,handleActiveBoardSwitch:i,redirect:o,handleShowDeleteBoardWarningModal:c,handleCloseDeleteBoardWarningModal:s,showDeleteBoardWarningModal:d})}}]),t}(n.Component),De=Object(P.b)((function(e){return{currentUser:e.currentUser,redirect:e.redirect,showDeleteBoardWarningModal:e.showDeleteBoardWarningModal}}),(function(e){return{handleLogoutClick:function(t){e((function(e){fetch("/logout",{method:"POST"}).then((function(){return e({type:"REDIRECT_AFTER_LOGOUT"})})).catch((function(t){console.log(t),e(C(t)),alert("Error logging out")}))}))},handleCreateBoard:function(t){e((function(e,t){var a=t().currentUser;fetch("/createBoard",{method:"POST",body:JSON.stringify({currentUser:a}),headers:{"Content-type":"application/json"}}).then((function(e){return console.log(e),e.json()})).then((function(t){e(N(t.lists)),e(D(t.user))})).catch((function(e){alert(e)}))}))},handleDeleteBoard:function(t){var a;e((a=t,function(e,t){console.log("butts");var n=t().currentUser;fetch("/deleteBoard",{method:"DELETE",body:JSON.stringify({board:a,currentUser:n}),headers:{"Content-type":"application/json"}}).then((function(e){return e.json()})).then((function(t){t.error?alert(JSON.stringify(t.error)):(console.log("current User "+JSON.stringify(t)),e(D(t)))})).catch((function(t){console.log(t),e(C(t)),alert("hmmmm")}))})),e({type:"CLOSE_DELETE_BOARD_WARNING_MODAL"})},handleActiveBoardSwitch:function(t){e(function(e){return function(t,a){var n=a().currentUser,r=e.target.id;console.log("boardId "+r),fetch("switchActiveBoard",{method:"PATCH",body:JSON.stringify({boardId:r,currentUser:n}),headers:{"Content-type":"application/json"}}).then((function(e){return e.json()})).then((function(e){t(N(e.lists)),t(D(e.user))})).catch((function(e){console.log(e),alert("hmmmm")}))}}(t))},handleShowDeleteBoardWarningModal:function(t){e(function(e){return{type:"SHOW_DELETE_BOARD_WARNING_MODAL",boardId:e}}(t))},handleCloseDeleteBoardWarningModal:function(){e({type:"CLOSE_DELETE_BOARD_WARNING_MODAL"})}}}))(fe),be=function(){return r.a.createElement("div",{id:"Home",className:"hero is-primary is-bold is-fullheight"},r.a.createElement("div",{className:"hero-body"},r.a.createElement("h1",{className:"is-size-1 has-text-weight-light"},"DJELLO"),r.a.createElement("p",null,"The task manager of tomorrow, today."),r.a.createElement("div",null,r.a.createElement(F.b,{to:"/login"},r.a.createElement("button",{className:"button"},"Sign in")))))};var Ne=function(){return r.a.createElement(F.a,null,r.a.createElement("div",{className:"App container is-fluid"},r.a.createElement(U.d,null,r.a.createElement(U.b,{path:"/",exact:!0,component:be}),r.a.createElement(U.b,{path:"/login",exact:!0,component:V}),r.a.createElement(U.b,{path:"/register",component:x}),r.a.createElement(U.b,{path:"/:user",component:(e=De,function(t){function a(){var e;return Object(j.a)(this,a),(e=Object(W.a)(this,Object(B.a)(a).call(this))).state={loading:!0,redirect:!1},e}return Object(H.a)(a,t),Object(R.a)(a,[{key:"componentDidMount",value:function(){var e=this;fetch("/checkForCurrentUser").then((function(t){if(console.log(t.status),200!==t.status)throw new Error(t.error);e.setState({loading:!1})})).catch((function(t){console.error(t),e.setState({loading:!1,redirect:!0})}))}},{key:"render",value:function(){var t=this.state,a=t.loading,n=t.redirect;return a?null:n?r.a.createElement(U.a,{to:"/login"}):r.a.createElement(e,this.props)}}]),a}(n.Component))}))));var e};i.a.render(r.a.createElement(P.a,{store:M},r.a.createElement(o.a,{loading:null,persistor:L},r.a.createElement(Ne,null))),document.getElementById("root"))}},[[37,1,2]]]);
//# sourceMappingURL=main.d5e814b8.chunk.js.map